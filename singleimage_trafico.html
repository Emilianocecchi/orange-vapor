<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creativos Orange Vapor - Campa√±as de Tr√°fico</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&display=swap" rel="stylesheet">
    <!-- Aseg√∫rate de que Font Awesome est√© disponible -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Estilos generales (sin cambios significativos) */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #f5f5f5;
            padding: 20px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .header h1 {
            font-size: 28px;
            color: #2c2c2c;
            margin-bottom: 10px;
        }
        .header p {
            color: #666;
            font-size: 16px;
        }
        .tabs {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        .tab-group {
            display: inline-flex;
            border-radius: 6px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            margin-bottom: 10px;
        }
        .tab-button {
            padding: 8px 16px;
            font-size: 14px;
            font-weight: 500;
            background-color: white;
            color: #333;
            border: 1px solid #ddd;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .tab-button:first-child {
            border-top-left-radius: 6px;
            border-bottom-left-radius: 6px;
        }
        .tab-button:last-child {
            border-top-right-radius: 6px;
            border-bottom-right-radius: 6px;
        }
        .tab-button.active {
            color: white;
        }
        .tab-button.optimizacion.active { background-color: #dc3545; border-color: #dc3545; }
        .tab-button.meta.active { background-color: #1877F2; border-color: #1877F2; }
        .tab-button.google.active { background-color: #4285F4; border-color: #4285F4; }
        .tab-button.email.active { background-color: #00829b; border-color: #00829b; }
        .tab-button.chatbot.active { background-color: #6f42c1; border-color: #6f42c1; }
        .tab-button.all.active { background-color: #333333; border-color: #333333; }
        .tab-button.auditoria.active { background-color: #28a745; border-color: #28a745; }

        /* Selector de color (sin cambios) */
        .color-toggle { text-align: center; margin: 20px 0; }
        .color-btn { width: 36px; height: 36px; border-radius: 50%; margin: 0 5px; cursor: pointer; display: inline-block; border: 2px solid #ddd; transition: all 0.2s ease; overflow: hidden; }
        .color-btn.active { border-color: #ff7e00; transform: scale(1.1); }
        .color-btn-original { background: linear-gradient(135deg, #dc3545 25%, #1877F2 25%, #1877F2 50%, #4285F4 50%, #4285F4 75%, #6f42c1 75%); }
        .color-btn-orange { background-color: #ff7e00; }
        .color-btn-white { background-color: #ffffff; border: 2px solid #ccc; }
        .color-btn-black { background-color: #181818; }

        /* Descarga (sin cambios) */
        .download-section { text-align: center; margin: 20px 0; }
        .download-btn { background: #ff7e00; color: white; border: none; padding: 12px 24px; font-size: 16px; font-weight: bold; border-radius: 6px; cursor: pointer; display: inline-flex; align-items: center; gap: 10px; box-shadow: 0 4px 8px rgba(255, 126, 0, 0.3); transition: all 0.3s ease; }
        .download-btn:hover { background: #e67300; transform: translateY(-2px); }

        /* Contenedor de creativos (sin cambios) */
        .creatives-container { display: flex; flex-wrap: wrap; justify-content: center; margin-top: 20px; }
        .creative { width: 360px; height: 360px; margin: 10px; position: relative; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); color: white; cursor: pointer; display: flex; align-items: center; justify-content: center; /* Centra el contenido */ text-align: center; /* Centra el texto */}
        .creative-vertical { width: 240px; height: 427px; } /* Preview Aspect Ratio 9:16 */

        /* Contenido del creativo - Simplificado */
        .creative-content {
            position: relative;
            z-index: 2;
            padding: 20px; /* Espacio alrededor */
            display: flex;
            flex-direction: column;
            align-items: center; /* Centra horizontalmente */
            justify-content: center; /* Centra verticalmente */
            height: 100%;
        }
        /* Estilo para icono en preview */
         .creative-icon {
            font-size: 40px; /* Tama√±o del icono en preview */
            margin-bottom: 15px;
            line-height: 1;
        }
        /* T√≠tulo (m√°s prominente) */
        .creative-title {
            font-size: 28px; /* M√°s grande */
            font-weight: 800; /* M√°s bold */
            margin-bottom: 8px;
            line-height: 1.1;
        }
        /* Subt√≠tulo (beneficio clave) */
        .creative-subtitle {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 12px;
            line-height: 1.2;
        }
        /* Descripci√≥n (m√°s corta o eliminada en algunos casos) */
        .creative-description {
            font-size: 14px;
            line-height: 1.4;
            opacity: 0.9; /* Ligeramente menos prominente */
        }
        /* Barra de acento eliminada para simplificar */
        /* .creative-accent { ... } */

        /* Descarga en hover (sin cambios) */
        .creative-download { position: absolute; top: 10px; right: 10px; width: 30px; height: 30px; border-radius: 50%; background: rgba(68, 68, 68, 0.8); display: flex; align-items: center; justify-content: center; cursor: pointer; opacity: 0; transition: opacity 0.3s; z-index: 10; }
        .creative:hover .creative-download { opacity: 1; }

        /* Nota, Info box (sin cambios) */
        .note { text-align: center; margin-top: 30px; color: #666; font-size: 12px; }
        .info-box { background-color: #e6f7ff; border-left: 4px solid #1890ff; padding: 15px; margin: 20px auto; max-width: 800px; border-radius: 4px; display: flex; align-items: flex-start; }
        .info-box i { color: #1890ff; font-size: 20px; margin-right: 10px; margin-top: 2px; }
        .info-box p { color: #333; font-size: 14px; margin: 0; line-height: 1.5; }

        /* Formato toggle, texto 20%, pr√°cticas (sin cambios) */
        .format-toggle { text-align: center; margin: 20px 0; }
        .format-btn { padding: 8px 16px; border: 1px solid #ddd; border-radius: 4px; background-color: white; margin: 0 5px; cursor: pointer; transition: all 0.2s ease; }
        .format-btn.active { background-color: #ff7e00; color: white; border-color: #ff7e00; }
        .text-20-indicator { padding: 8px 12px; font-size: 13px; background-color: rgba(255, 126, 0, 0.1); border: 1px solid #ff7e00; color: #666; margin: 10px 0; border-radius: 4px; text-align: center; }
        .best-practices { background-color: #f8f8f8; border-radius: 8px; padding: 15px; margin: 20px 0; }
        .best-practices h3 { font-size: 16px; color: #333; margin-bottom: 10px; }
        .best-practices ul { list-style-type: disc; margin-left: 20px; }
        .best-practices li { font-size: 13px; margin-bottom: 5px; color: #666; }
        .toggle-practices { display: block; margin: 10px auto; background: none; border: 1px solid #ddd; padding: 5px 10px; font-size: 12px; color: #666; cursor: pointer; border-radius: 4px; }

        /* Logo (sin cambios) */
        .logo-container { position: absolute; top: 15px; left: 15px; padding: 5px 10px; border-radius: 4px; z-index: 20; }

        /* Modal y Canvas (sin cambios) */
        .loading-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.7); display: flex; justify-content: center; align-items: center; z-index: 9999; }
        .loading-container { background-color: #fff; padding: 20px 30px; border-radius: 8px; box-shadow: 0 4px 20px rgba(0,0,0,0.3); text-align: center; }
        .loading-spinner { display: inline-block; width: 30px; height: 30px; border: 4px solid rgba(0,0,0,.1); border-radius: 50%; border-top-color: #ff7e00; animation: spin 1s ease-in-out infinite; margin-bottom: 10px; }
        @keyframes spin { to { transform: rotate(360deg); } }
        #downloadCanvas { position: absolute; left: -9999px; top: -9999px; }

        /* Ad Copy Section (sin cambios) */
        .ad-copy-section { margin-top: 40px; border-top: 1px solid #eee; padding-top: 20px; }
        .ad-copy-section h3 { font-size: 18px; color: #333; text-align: center; margin-bottom: 15px; }
        .ad-copy-container { background-color: #f9f9f9; border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); max-width: 800px; margin: 0 auto; }
        .ad-copy-text { font-size: 16px; line-height: 1.6; color: #444; white-space: pre-line; }
        .copy-btn { background: #f1f1f1; border: 1px solid #ddd; border-radius: 4px; padding: 8px 16px; font-size: 14px; color: #555; cursor: pointer; display: flex; align-items: center; justify-content: center; margin: 15px auto 0; transition: all 0.3s ease; }
        .copy-btn:hover { background: #e9e9e9; }
        .copy-btn i { margin-right: 8px; }
        .campaign-type-indicator { background-color: #f8fafa; border: 1px dashed #1890ff; border-radius: 4px; padding: 10px; margin: 15px 0; text-align: center; color: #1890ff; font-weight: 600; font-size: 14px; display: flex; align-items: center; justify-content: center; gap: 8px; }

    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 id="serviceTitle">Creativos de Tr√°fico para [Servicio]</h1>
            <p>Anuncios simples e impactantes optimizados para Meta Ads (Single Image)</p>
        </div>

        <div class="campaign-type-indicator">
            <i class="fas fa-globe"></i>
            <span>Campa√±as Optimizadas para Tr√°fico al Sitio Web</span>
        </div>

        <div class="tabs">
             <div class="tab-group">
                <button class="tab-button auditoria" data-service="auditoria">Auditor√≠a Gratis</button>
                <button class="tab-button optimizacion" data-service="optimizacion">Optimizaci√≥n Express</button>
                <button class="tab-button meta active" data-service="meta">Meta Ads</button> <!-- Default activo -->
                <button class="tab-button google" data-service="google">Google Ads</button>
                <button class="tab-button email" data-service="email">Email Marketing</button>
                <button class="tab-button chatbot" data-service="chatbot">Chatbot</button>
                <button class="tab-button all" data-service="all">Paquete Completo</button>
            </div>
        </div>

        <div class="format-toggle">
            <button id="squareBtn" class="format-btn active">Cuadrado (1080x1080)</button>
            <button id="verticalBtn" class="format-btn">Vertical (1080x1920)</button>
        </div>

        <div class="color-toggle">
            <div class="color-btn color-btn-original active" data-color="original" title="Color original del servicio"></div>
            <div class="color-btn color-btn-orange" data-color="orange" title="Fondo naranja"></div>
            <div class="color-btn color-btn-white" data-color="white" title="Fondo blanco"></div>
            <div class="color-btn color-btn-black" data-color="black" title="Fondo negro"></div>
        </div>

        <div class="download-section">
            <button id="downloadBtn" class="download-btn">
                <i class="fas fa-download"></i>
                Descargar Creativo
            </button>
        </div>

        <div class="info-box">
            <i class="fas fa-info-circle"></i>
            <div>
                <p><strong>Instrucciones:</strong></p>
                <p>1. Selecciona el servicio.</p>
                <p>2. Elige el formato (Cuadrado o Vertical para Stories/Reels).</p>
                <p>3. Selecciona el color de fondo.</p>
                <p>4. Haz clic en "Descargar Creativo" o en la previsualizaci√≥n.</p>
                <p><strong>Nota:</strong> El formato Vertical (1080x1920) est√° dise√±ado con m√°rgenes seguros para texto en Stories.</p>
            </div>
        </div>

        <div class="text-20-indicator">
            <i class="fas fa-check-circle" style="color: #00b300;"></i>
            Texto optimizado (menos del 20% del espacio) - Aprobado para Meta Ads
        </div>

        <div class="best-practices" style="display: none;">
            <h3>Mejores Pr√°cticas para Anuncios de Tr√°fico:</h3>
            <ul>
                 <li><strong>T√≠tulo Claro:</strong> Nombre del servicio + Beneficio principal.</li>
                 <li><strong>Icono Relevante:</strong> Refuerza visualmente el servicio.</li>
                 <li><strong>Contraste Alto:</strong> Colores de texto/fondo que facilitan la lectura r√°pida.</li>
                 <li><strong>Llamada a la Acci√≥n Impl√≠cita:</strong> El dise√±o incita a querer saber m√°s (clic).</li>
                 <li><strong>Logotipo Visible:</strong> Refuerza la marca (posici√≥n superior izquierda).</li>
                 <li><strong>Menos es M√°s:</strong> Evitar sobrecargar con informaci√≥n.</li>
                 <li><strong>Adaptado a Formato:</strong> Dise√±o optimizado para cuadrado y vertical (stories).</li>
            </ul>
        </div>
        <button class="toggle-practices" id="togglePractices">Ver mejores pr√°cticas</button>

        <div id="creativesContainer" class="creatives-container">
            <!-- El creativo se inserta din√°micamente aqu√≠ -->
        </div>

        <div class="note">
            <p>Dimensiones: 1080x1080 px (Cuadrado) y 1080x1920 px (Vertical)</p>
        </div>

        <div class="ad-copy-section">
            <h3>Copy para Anuncio de Tr√°fico (Ejemplo)</h3>
            <div class="ad-copy-container">
                <p id="adCopyText" class="ad-copy-text">
                    <!-- El copy se inserta din√°micamente aqu√≠ -->
                </p>
                <button id="copyBtn" class="copy-btn">
                    <i class="fas fa-copy"></i> Copiar
                </button>
            </div>
        </div>

        <canvas id="downloadCanvas"></canvas>
    </div>

    <script>
        // Colores (sin cambios)
        const colors = {
            primary: '#ff7e00', dark: '#181818', light: '#ffffff',
            auditoria: '#28a745', optimizacion: '#dc3545', meta: '#1877F2',
            google: '#4285F4', email: '#00829b', chatbot: '#6f42c1', all: '#333333'
        };

        // --- DATOS DE CREATIVOS ACTUALIZADOS ---
        // Formato: T√≠tulo = Nombre Servicio, Subt√≠tulo = Beneficio Clave/Impactante, Desc = Detalle corto (opcional)
        const creativesData = {
            auditoria: {
                title: 'AUDITOR√çA ADS GRATIS',
                subtitle: 'Descubre Fugas de Dinero',
                description: 'An√°lisis R√°pido ‚Ä¢ Sin Compromiso',
                bgColor: colors.auditoria,
                icon: '\uf080' // fa-chart-line
            },
            optimizacion: {
                title: 'OPTIMIZACI√ìN EXPRESS',
                subtitle: '+20% Conversi√≥n en 48hs',
                description: 'Det√©n el Gasto Innecesario',
                bgColor: colors.optimizacion,
                icon: '\uf543' // fa-rocket
            },
            meta: {
                title: 'META ADS',
                subtitle: 'ROAS Garantizado 2.8X',
                description: 'Ventas Reales con Facebook & Instagram',
                bgColor: colors.meta,
                icon: '\uf39e' // fa-facebook
            },
            google: {
                title: 'GOOGLE ADS',
                subtitle: 'Convierte B√∫squedas en Clientes',
                description: 'Aparece Primero ‚Ä¢ Maximiza Inversi√≥n',
                bgColor: colors.google,
                icon: '\uf1a0' // fa-google
            },
            email: {
                title: 'EMAIL MARKETING',
                subtitle: '38% Apertura ‚Ä¢ Ventas Auto',
                description: 'Nutre Leads ‚Ä¢ Genera Ingresos',
                bgColor: colors.email,
                icon: '\uf0e0' // fa-envelope
            },
            chatbot: {
                title: 'CHATBOT IA',
                subtitle: 'Atenci√≥n 24/7 ‚Ä¢ 68% Conversi√≥n', // Dato de imagen ejemplo
                description: 'Captura Leads ‚Ä¢ Responde al Instante',
                bgColor: colors.chatbot,
                icon: '\uf135' // fa-robot
            },
            all: {
                title: 'MARKETING TOTAL',
                subtitle: 'Ahorra $200/Mes',
                description: 'Meta ‚Ä¢ Google ‚Ä¢ Email ‚Ä¢ Chatbot',
                bgColor: colors.all,
                icon: '\uf0e8' // fa-sitemap (representa integraci√≥n)
            }
        };

        // Ad Copy Data (sin cambios, ya estaba bien)
        const adCopyData = { /* ... (mismo contenido que antes) ... */
             auditoria: `üîç ¬øQU√â EST√Å FALLANDO EN TUS CAMPA√ëAS DE MARKETING DIGITAL? üîç\n\n¬øSab√≠as que el 67% de las empresas invierten en publicidad sin comprender qu√© m√©tricas realmente impactan sus ventas? üí°\n\nEst√°s a punto de descubrir por qu√© tu competencia consigue mejores resultados con el mismo presupuesto...\n\n‚úÖ An√°lisis completo de tus campa√±as actuales\n‚úÖ Identificaci√≥n exacta de d√≥nde est√°s perdiendo dinero\n‚úÖ Comparativa con estrategias de competidores exitosos\n‚úÖ 100% gratis y sin compromiso de contrataci√≥n\n\nüëâ Visit√° nuestra web y descubr√≠ qu√© oportunidades de crecimiento est√°s dejando pasar mientras lees esto.\n\nLa auditor√≠a gratuita tiene cupos limitados cada semana. ¬øPor qu√© esperar?\n\n‚û°Ô∏è www.orangevapor.com`,
            optimizacion: `‚ö° TRANSFORMA TUS CAMPA√ëAS QUE NO CONVIERTEN EN SOLO 48 HORAS ‚ö°\n\nCada d√≠a con campa√±as mal optimizadas significa dinero perdido y oportunidades desaprovechadas... üí∏\n\nNuestro sistema de "Detecci√≥n de Fugas‚Ñ¢" ha revelado que:\n\n‚úÖ El 63% del presupuesto se desperdicia en configuraciones incorrectas\n‚úÖ La segmentaci√≥n imprecisa es la principal causa de CPA elevados\n‚úÖ La mayor√≠a de las campa√±as necesitan solo 3 ajustes clave para aumentar ventas\n\nüëâ En nuestro sitio web encontrar√°s c√≥mo transformamos las campa√±as de una tienda online, aumentando sus ventas un 20% en solo 14 d√≠as.\n\nDiagn√≥stico + Estructura optimizada con garant√≠a de resultados o solo pagas la mitad.\n\n¬øQuer√©s detener el sangrado presupuestario ahora? Visit√° üëá\nwww.orangevapor.com`,
            meta: `üì± MULTIPLICA TUS VENTAS CON META ADS QUE CONVIERTEN üì±\n\n¬øDe cada $1 invertido en tus Facebook & Instagram Ads, cu√°nto recuperas en ventas reales? ü§î\n\nNuestros clientes obtienen M√çNIMO $2.8 por cada $1 invertido...\n\n‚úÖ 2.8x ROAS m√≠nimo garantizado o te devolvemos tu dinero\n‚úÖ 35% reducci√≥n promedio en costo por adquisici√≥n\n‚úÖ 45% m√°s conversiones con la misma inversi√≥n\n‚úÖ Gesti√≥n profesional que maximiza cada peso invertido\n\nüëâ En nuestro sitio web podr√°s ver c√≥mo una tienda de moda online aument√≥ su ROAS de 1.2x a 3.4x en solo 3 meses.\n\nCampa√±as estructuradas y optimizadas espec√≠ficamente para tu negocio.\n\n¬øQuer√©s aprovechar el verdadero potencial de Meta Ads? Hac√© clic ahora üëá\nwww.orangevapor.com`,
            google: `üîé CONVIERTE B√öSQUEDAS EN VENTAS REALES CON GOOGLE ADS üîé\n\nMientras tus competidores aparecen en los primeros resultados de Google, ¬ød√≥nde est√° tu negocio? üëÄ\n\nDescubre c√≥mo posicionarte estrat√©gicamente con:\n\n‚úÖ 2.8x ROAS m√≠nimo garantizado o te devolvemos tu dinero\n‚úÖ Investigaci√≥n de palabras clave rentables para tu industria\n‚úÖ Optimizaci√≥n semanal de pujas y presupuestos\n‚úÖ An√°lisis de competencia para detectar oportunidades ocultas\n\nüëâ En nuestro sitio web ver√°s c√≥mo una empresa de servicios profesionales aument√≥ sus leads calificados un 190% y redujo su costo de adquisici√≥n un 38%.\n\nGoogle Ads gestionado por expertos con resultados medibles.\n\nPosiciona tu negocio donde tus clientes est√°n buscando üëá\nwww.orangevapor.com`,
            email: `üìß EMAIL MARKETING QUE GENERA INGRESOS AUTOM√ÅTICOS 24/7 üìß\n\n¬øSab√≠as que el email marketing ofrece el mayor ROI de todos los canales digitales (3600% en promedio)? üìà\n\nTu base de datos es uno de tus activos m√°s valiosos. ¬øLo est√°s aprovechando?\n\n‚úÖ 38% promedio de tasa de apertura (vs. 15% est√°ndar de la industria)\n‚úÖ Secuencias automatizadas que convierten prospectos en clientes\n‚úÖ Segmentaci√≥n estrat√©gica basada en comportamiento real\n‚úÖ Ingresos recurrentes, incluso mientras duermes\n\nüëâ En nuestro sitio web conocer√°s c√≥mo una boutique de cosm√©tica natural aument√≥ sus ingresos mensuales por email de $400 a $4,800 en poco tiempo.\n\nNurturing automatizado que monetiza cada contacto en tu base de datos.\n\nDescubre c√≥mo transformar tu email marketing hoy mismo üëá\nwww.orangevapor.com`,
            chatbot: `ü§ñ ATENCI√ìN AL CLIENTE AUTOMATIZADA QUE GENERA VENTAS 24/7 ü§ñ\n\n¬øCu√°ntos leads y ventas pierdes cuando tu equipo no puede responder inmediatamente? ‚è∞\n\nLos chatbots inteligentes est√°n revolucionando la atenci√≥n al cliente:\n\n‚úÖ Atenci√≥n instant√°nea 24/7, incluso fuera de horario comercial\n‚úÖ Reducci√≥n de hasta 70% en costos de atenci√≥n al cliente\n‚úÖ Captura datos de clientes potenciales mientras duermes\n‚úÖ Respuestas en 5 minutos vs. 48 horas de atenci√≥n humana\n\nüëâ En nuestro sitio web ver√°s c√≥mo una tienda redujo su tiempo de respuesta de 2 d√≠as a 10 minutos y aument√≥ su tasa de conversi√≥n del 22% al 68%.\n\nChatbots inteligentes que maximizan tus resultados mientras liberan a tu equipo.\n\n¬øListo para nunca m√°s perder una oportunidad de venta? üëá\nwww.orangevapor.com`,
            all: `üöÄ MULTIPLICA TUS RESULTADOS CON MARKETING DIGITAL INTEGRADO üöÄ\n\n¬øPor qu√© conformarte con resultados mediocres cuando puedes tener una estrategia digital completa? üîÑ\n\nEl paquete integral que est√° transformando negocios incluye:\n\n‚úÖ Meta Ads: 2.8x ROAS m√≠nimo garantizado\n‚úÖ Google Ads: Posicionamiento estrat√©gico que convierte\n‚úÖ Email Marketing: 38% de tasa de apertura promedio\n‚úÖ Chatbot: Atenci√≥n 24/7 y captura de leads autom√°tica\n\nüëâ En nuestro sitio web descubrir√°s c√≥mo ahorrarte casi $200 al mes contratando nuestro paquete completo por solo $1000/mes.\n\nEstrategias digitales dise√±adas con un √∫nico objetivo: maximizar tu ROI.\n\nPotencia todos los canales de tu negocio con un solo clic üëá\nwww.orangevapor.com`
        };

        // Estado inicial
        let activeService = 'meta'; // Empezar con Meta Ads activo
        let activeFormat = 'square';
        let activeColor = 'original';
        let isProcessing = false;

        // Elementos del DOM (sin cambios)
        const serviceTitle = document.getElementById('serviceTitle');
        const creativesContainer = document.getElementById('creativesContainer');
        const tabButtons = document.querySelectorAll('.tab-button');
        const formatButtons = document.querySelectorAll('.format-btn');
        const colorButtons = document.querySelectorAll('.color-btn');
        const squareBtn = document.getElementById('squareBtn');
        const verticalBtn = document.getElementById('verticalBtn');
        const downloadBtn = document.getElementById('downloadBtn');
        const togglePracticesBtn = document.getElementById('togglePractices');
        const bestPracticesBox = document.querySelector('.best-practices');
        const downloadCanvas = document.getElementById('downloadCanvas');
        const adCopyText = document.getElementById('adCopyText');
        const copyBtn = document.getElementById('copyBtn');

        // --- FUNCIONES AUXILIARES (con ajustes menores o sin cambios) ---
        copyBtn.addEventListener('click', () => { /* ... (sin cambios) ... */
            const textToCopy = adCopyText.textContent;
            navigator.clipboard.writeText(textToCopy)
                .then(() => {
                    copyBtn.innerHTML = '<i class="fas fa-check"></i> Copiado!';
                    setTimeout(() => {
                        copyBtn.innerHTML = '<i class="fas fa-copy"></i> Copiar';
                    }, 2000);
                })
                .catch(err => {
                    console.error('Error al copiar: ', err);
                    copyBtn.innerHTML = '<i class="fas fa-times"></i> Error';
                    setTimeout(() => {
                        copyBtn.innerHTML = '<i class="fas fa-copy"></i> Copiar';
                    }, 2000);
                });
         });
        togglePracticesBtn.addEventListener('click', () => {
            if (bestPracticesBox.style.display === 'none') {
                bestPracticesBox.style.display = 'block';
                togglePracticesBtn.textContent = 'Ocultar mejores pr√°cticas';
            } else {
                bestPracticesBox.style.display = 'none';
                togglePracticesBtn.textContent = 'Ver mejores pr√°cticas'; // Texto m√°s gen√©rico
            }
        });

        function getServiceTitle(service) { /* ... (sin cambios) ... */
             switch (service) {
                case 'auditoria': return 'Creativos de Tr√°fico para Auditor√≠a Gratuita';
                case 'optimizacion': return 'Creativos de Tr√°fico para Optimizaci√≥n Express';
                case 'meta': return 'Creativos de Tr√°fico para Meta Ads';
                case 'google': return 'Creativos de Tr√°fico para Google Ads';
                case 'email': return 'Creativos de Tr√°fico para Email Marketing';
                case 'chatbot': return 'Creativos de Tr√°fico para Chatbot';
                case 'all': return 'Creativos de Tr√°fico para Paquete Completo';
                default: return 'Creativos de Tr√°fico';
            }
         }
        function getBgColor() { /* ... (sin cambios) ... */
             if (activeColor === 'original') { return creativesData[activeService].bgColor; }
             else if (activeColor === 'orange') { return colors.primary; }
             else if (activeColor === 'white') { return colors.light; }
             else if (activeColor === 'black') { return colors.dark; }
        }
        function getTextColor(bgColor) { /* ... (sin cambios) ... */
             let rgb;
             if (bgColor.startsWith('#')) {
                 const r = parseInt(bgColor.slice(1, 3), 16);
                 const g = parseInt(bgColor.slice(3, 5), 16);
                 const b = parseInt(bgColor.slice(5, 7), 16);
                 rgb = {r, g, b};
             } else if (bgColor.startsWith('rgb')) {
                 const matches = bgColor.match(/\d+/g);
                 rgb = { r: parseInt(matches[0]), g: parseInt(matches[1]), b: parseInt(matches[2]) };
             } else { // Default fallback
                 return colors.dark;
             }
             const luminance = (0.299 * rgb.r + 0.587 * rgb.g + 0.114 * rgb.b) / 255;
             return luminance > 0.5 ? colors.dark : colors.light;
        }
        // Ya no usamos acento, usamos el color de texto para el icono
        // function getAccentColor(bgColor) { /* ... */ }

        // --- RENDERIZADO DE PREVISUALIZACI√ìN (ACTUALIZADO) ---
        function renderCreative() {
            creativesContainer.innerHTML = '';
            const creative = creativesData[activeService];
            const bgColor = getBgColor();
            const textColor = getTextColor(bgColor);

            const creativeEl = document.createElement('div');
            creativeEl.className = `creative ${activeFormat === 'vertical' ? 'creative-vertical' : ''}`;
            creativeEl.style.backgroundColor = bgColor;
            creativeEl.style.color = textColor; // Aplicar color de texto general

            // Contenido (simplificado y centrado)
            const contentEl = document.createElement('div');
            contentEl.className = 'creative-content';

            // Logo (superior izquierda)
            const logoContainerEl = document.createElement('div');
            logoContainerEl.className = 'logo-container';
            const logoEl = document.createElement('div');
            logoEl.style.fontWeight = 'bold';
            logoEl.style.fontSize = '14px';
             if (activeColor === 'white') {
                logoEl.innerHTML = `<span style="color: ${colors.dark};">Orange</span> <span style="color: ${colors.primary};">Vapor</span>`;
            } else if (activeColor === 'orange') {
                 logoEl.innerHTML = `<span style="color: ${colors.light};">Orange Vapor</span>`;
             } else {
                logoEl.innerHTML = `<span style="color: ${textColor};">Orange</span> <span style="color: ${colors.primary};">Vapor</span>`;
            }
            logoContainerEl.appendChild(logoEl);
            creativeEl.appendChild(logoContainerEl); // A√±adir logo al contenedor principal

            // Icono (Font Awesome)
            if (creative.icon) {
                const iconEl = document.createElement('i');
                // Necesitamos a√±adir clases de Font Awesome din√°micamente
                // El creative.icon ahora es el unicode, necesitamos la clase
                // Mapeo r√°pido Unicode -> Clases FA (puede necesitar ajustes)
                const iconMap = {
                    '\uf080': 'fa-solid fa-chart-line', '\uf543': 'fa-solid fa-rocket',
                    '\uf39e': 'fa-brands fa-facebook', '\uf1a0': 'fa-brands fa-google',
                    '\uf0e0': 'fa-solid fa-envelope', '\uf135': 'fa-solid fa-robot',
                    '\uf0e8': 'fa-solid fa-sitemap'
                };
                iconEl.className = `creative-icon ${iconMap[creative.icon] || 'fa-solid fa-question'}`; // Fallback
                iconEl.style.color = textColor; // Usar color de texto
                contentEl.appendChild(iconEl);
            }

            // T√≠tulo (Nombre Servicio)
            const titleEl = document.createElement('div');
            titleEl.className = 'creative-title';
            titleEl.textContent = creative.title;
            contentEl.appendChild(titleEl);

            // Subt√≠tulo (Beneficio)
            const subtitleEl = document.createElement('div');
            subtitleEl.className = 'creative-subtitle';
            subtitleEl.textContent = creative.subtitle;
            contentEl.appendChild(subtitleEl);

            // Descripci√≥n (Opcional, m√°s corta)
            if (creative.description) {
                const descEl = document.createElement('div');
                descEl.className = 'creative-description';
                descEl.style.whiteSpace = 'pre-line';
                descEl.textContent = creative.description;
                contentEl.appendChild(descEl);
            }

            creativeEl.appendChild(contentEl); // A√±adir contenido al contenedor principal

            // Bot√≥n descarga hover
            const downloadEl = document.createElement('div');
            downloadEl.className = 'creative-download';
            downloadEl.innerHTML = '<i class="fas fa-download" style="color: white;"></i>';
            downloadEl.addEventListener('click', (e) => {
                e.stopPropagation();
                generateAndDownloadImage();
            });
            creativeEl.appendChild(downloadEl);

            creativeEl.addEventListener('click', generateAndDownloadImage);
            creativesContainer.appendChild(creativeEl);
            updateAdCopy();
        }

        // --- FUNCIONES DE MODAL Y ACTUALIZACI√ìN DE COPY (sin cambios) ---
        function updateAdCopy() { /* ... (sin cambios) ... */
             adCopyText.textContent = adCopyData[activeService] || "Copy de anuncio no disponible para este servicio.";
        }
        function showLoadingModal(message = "Generando imagen...") { /* ... (sin cambios) ... */
             const modalEl = document.createElement('div');
             modalEl.className = 'loading-modal'; modalEl.id = 'loadingModal';
             const containerEl = document.createElement('div'); containerEl.className = 'loading-container';
             const spinnerEl = document.createElement('div'); spinnerEl.className = 'loading-spinner';
             const messageEl = document.createElement('div'); messageEl.textContent = message;
             containerEl.appendChild(spinnerEl); containerEl.appendChild(messageEl);
             modalEl.appendChild(containerEl); document.body.appendChild(modalEl);
         }
        function hideLoadingModal() { /* ... (sin cambios) ... */
            const modal = document.getElementById('loadingModal');
            if (modal) { document.body.removeChild(modal); }
        }


        // --- GENERACI√ìN Y DESCARGA DE IMAGEN (ACTUALIZADO) ---
        async function generateAndDownloadImage() {
            if (isProcessing) return;
            isProcessing = true;
            showLoadingModal();

            try {
                const creative = creativesData[activeService];
                const isVertical = activeFormat === 'vertical';
                const width = 1080; // Siempre 1080 de ancho
                const height = isVertical ? 1920 : 1080;

                downloadCanvas.width = width;
                downloadCanvas.height = height;
                const ctx = downloadCanvas.getContext('2d');
                ctx.clearRect(0, 0, width, height);

                const bgColor = getBgColor();
                const textColor = getTextColor(bgColor);

                // 1. Fondo
                ctx.fillStyle = bgColor;
                ctx.fillRect(0, 0, width, height);

                // 2. Logo (esquina superior izquierda)
                const logoX = 40;
                const logoY = 60; // Un poco m√°s abajo
                ctx.font = 'bold 30px Montserrat, sans-serif'; // Tama√±o fijo para logo
                if (activeColor === 'white') {
                    ctx.fillStyle = colors.dark; ctx.fillText('Orange', logoX, logoY);
                    const orangeWidth = ctx.measureText('Orange ').width;
                    ctx.fillStyle = colors.primary; ctx.fillText('Vapor', logoX + orangeWidth, logoY);
                } else if (activeColor === 'orange') {
                     ctx.fillStyle = colors.light; ctx.fillText('Orange Vapor', logoX, logoY);
                } else {
                    ctx.fillStyle = textColor; ctx.fillText('Orange', logoX, logoY);
                    const orangeWidth = ctx.measureText('Orange ').width;
                    ctx.fillStyle = colors.primary; ctx.fillText('Vapor', logoX + orangeWidth, logoY);
                }

                // --- Centro del contenido ---
                const contentStartY = isVertical ? height * 0.25 : height * 0.2; // Ajustar inicio para m√°s espacio arriba en vertical
                const contentCenterY = isVertical ? height * 0.5 : height * 0.5; // Centro vertical
                const contentMaxY = isVertical ? height * 0.85 : height * 0.8; // L√≠mite inferior aprox
                let currentY = contentCenterY; // Empezar desde el centro

                // 3. Icono (Centrado, encima del t√≠tulo)
                 if (creative.icon) {
                    // Intentar cargar Font Awesome Solid y Brands
                    // Nota: Esto es una simplificaci√≥n. La carga real de fuentes en canvas es m√°s compleja.
                    // Asumimos que el navegador puede encontrarla si est√° linkeada en el HTML.
                    const faSolidFont = '900 80px "Font Awesome 6 Free"'; // Para solid icons
                    const faBrandsFont = '400 80px "Font Awesome 6 Brands"'; // Para brand icons
                    // Determinar qu√© fuente usar basado en el icono (simple check)
                    ctx.font = (creative.icon === '\uf39e' || creative.icon === '\uf1a0') ? faBrandsFont : faSolidFont;

                    ctx.fillStyle = textColor;
                    ctx.textAlign = 'center';
                    const iconY = contentCenterY - (isVertical ? 180 : 100); // Posici√≥n Y del icono
                    if (iconY > contentStartY) { // Dibujar solo si est√° dentro de l√≠mites razonables
                      ctx.fillText(creative.icon, width / 2, iconY);
                      currentY = iconY + (isVertical ? 120 : 70); // Ajustar Y para el t√≠tulo
                    } else {
                      currentY = contentCenterY - (isVertical ? 80 : 50); // Si no hay icono, empezar t√≠tulo m√°s arriba
                    }

                 } else {
                    currentY = contentCenterY - (isVertical ? 80 : 50); // Posici√≥n inicial si no hay icono
                 }


                // 4. T√≠tulo (Nombre Servicio - Grande y Bold)
                ctx.fillStyle = textColor;
                ctx.textAlign = 'center';
                const titleFontSize = isVertical ? 95 : 85;
                ctx.font = `800 ${titleFontSize}px Montserrat, sans-serif`; // Muy bold
                const titleLineHeight = titleFontSize * 1.1;
                currentY = wrapText(ctx, creative.title, width / 2, currentY, width * 0.85, titleLineHeight); // Usar wrapText
                currentY += titleLineHeight * 0.2; // Peque√±o espacio post-t√≠tulo

                // 5. Subt√≠tulo (Beneficio Clave)
                const subtitleFontSize = isVertical ? 55 : 45;
                ctx.font = `600 ${subtitleFontSize}px Montserrat, sans-serif`; // SemiBold
                const subtitleLineHeight = subtitleFontSize * 1.2;
                currentY += subtitleLineHeight * 0.6; // Espacio antes del subt√≠tulo
                if (currentY < contentMaxY) {
                    currentY = wrapText(ctx, creative.subtitle, width / 2, currentY, width * 0.9, subtitleLineHeight);
                    currentY += subtitleLineHeight * 0.2;
                }

                // 6. Descripci√≥n (Corta, Opcional)
                if (creative.description) {
                    const descFontSize = isVertical ? 38 : 32;
                    ctx.font = `400 ${descFontSize}px Montserrat, sans-serif`; // Regular
                    const descLineHeight = descFontSize * 1.3;
                     currentY += descLineHeight * 0.5; // Espacio antes de la descripci√≥n
                    if (currentY < contentMaxY) {
                       wrapText(ctx, creative.description, width / 2, currentY, width * 0.8, descLineHeight);
                    }
                }


                // 7. Descargar imagen (con delay para asegurar renderizado)
                 // Usar requestAnimationFrame para asegurar que el dibujo est√© completo
                requestAnimationFrame(() => {
                    setTimeout(() => { // Peque√±o delay adicional por si acaso
                        try {
                            const dataUrl = downloadCanvas.toDataURL('image/png');
                            const link = document.createElement('a');
                            link.href = dataUrl;
                            link.download = `OV_${activeService}_${activeColor}_${isVertical ? '1080x1920' : '1080x1080'}.png`;
                            document.body.appendChild(link);
                            link.click();
                            document.body.removeChild(link);

                            hideLoadingModal();
                            isProcessing = false;
                        } catch (error) {
                            console.error('Error al descargar la imagen:', error);
                            hideLoadingModal();
                            alert('Hubo un error al generar la imagen. Por favor intenta de nuevo.');
                            isProcessing = false;
                        }
                    }, 50); // Reducido el delay
                });

            } catch (error) {
                console.error('Error al generar la imagen:', error);
                hideLoadingModal();
                alert('Hubo un error al generar la imagen. Por favor intenta de nuevo.');
                isProcessing = false;
            }
        }


        // --- FUNCI√ìN WRAPTEXT (ACTUALIZADA PARA DEVOLVER NUEVA Y) ---
        function wrapText(ctx, text, x, y, maxWidth, lineHeight) {
            const words = text.split(' ');
            let line = '';
            let currentY = y; // Usar variable local para la posici√≥n Y

            for (let n = 0; n < words.length; n++) {
                const testLine = line + words[n] + ' ';
                const metrics = ctx.measureText(testLine);
                const testWidth = metrics.width;

                if (testWidth > maxWidth && n > 0) {
                    ctx.fillText(line.trim(), x, currentY); // trim() para quitar espacio final
                    line = words[n] + ' ';
                    currentY += lineHeight;
                } else {
                    line = testLine;
                }
            }

            ctx.fillText(line.trim(), x, currentY); // Dibujar la √∫ltima l√≠nea
            return currentY + lineHeight; // Devolver la posici√≥n Y *despu√©s* de la √∫ltima l√≠nea dibujada
        }


        // --- FUNCI√ìN PARA ACTUALIZAR UI (sin cambios significativos) ---
        function updateUI() {
            serviceTitle.textContent = getServiceTitle(activeService);

            tabButtons.forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.service === activeService) btn.classList.add('active');
            });

            formatButtons.forEach(btn => btn.classList.remove('active'));
            if (activeFormat === 'square') squareBtn.classList.add('active');
            else verticalBtn.classList.add('active');

            colorButtons.forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.color === activeColor) btn.classList.add('active');
            });

            renderCreative(); // Llama a la funci√≥n de renderizado actualizada
        }

        // --- EVENT LISTENERS (sin cambios) ---
        tabButtons.forEach(btn => {
            btn.addEventListener('click', () => { activeService = btn.dataset.service; updateUI(); });
        });
        squareBtn.addEventListener('click', () => { activeFormat = 'square'; updateUI(); });
        verticalBtn.addEventListener('click', () => { activeFormat = 'vertical'; updateUI(); });
        colorButtons.forEach(btn => {
            btn.addEventListener('click', () => { activeColor = btn.dataset.color; updateUI(); });
        });
        downloadBtn.addEventListener('click', generateAndDownloadImage);

        // Inicializar
        updateUI();
    </script>
</body>
</html>
