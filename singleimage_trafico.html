<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creativos Orange Vapor - Campa√±as de Tr√°fico Ads</title> <!-- T√≠tulo actualizado -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #f5f5f5;
            padding: 20px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .header h1 {
            font-size: 28px;
            color: #2c2c2c;
            margin-bottom: 10px;
        }
        .header p {
            color: #666;
            font-size: 16px;
        }
        .tabs {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        .tab-group {
            display: inline-flex;
            border-radius: 6px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            margin-bottom: 10px;
        }
        .tab-button {
            padding: 8px 16px;
            font-size: 14px;
            font-weight: 500;
            background-color: white;
            color: #333;
            border: 1px solid #ddd;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .tab-button:first-child {
            border-top-left-radius: 6px;
            border-bottom-left-radius: 6px;
        }
        .tab-button:last-child {
            border-top-right-radius: 6px;
            border-bottom-right-radius: 6px;
        }
        .tab-button.active {
            color: white;
        }
        .tab-button.optimizacion.active {
            background-color: #dc3545;
            border-color: #dc3545;
        }
        .tab-button.meta.active {
            background-color: #1877F2;
            border-color: #1877F2;
        }
        .tab-button.google.active {
            background-color: #4285F4;
            border-color: #4285F4;
        }
        .tab-button.email.active {
            background-color: #00829b;
            border-color: #00829b;
        }
        .tab-button.chatbot.active {
            background-color: #6f42c1;
            border-color: #6f42c1;
        }
        .tab-button.all.active {
            background-color: #333333;
            border-color: #333333;
        }
        .tab-button.auditoria.active {
            background-color: #28a745;
            border-color: #28a745;
        }

        /* Selector de color */
        .color-toggle {
            text-align: center;
            margin: 20px 0;
        }
        .color-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            margin: 0 5px;
            cursor: pointer;
            display: inline-block;
            border: 2px solid #ddd;
            transition: all 0.2s ease;
            overflow: hidden;
        }
        .color-btn.active {
            border-color: #ff7e00;
            transform: scale(1.1);
        }
        .color-btn-original {
            background: linear-gradient(135deg, #28a745 14%, #dc3545 14% 28%, #1877F2 28% 42%, #4285F4 42% 56%, #00829b 56% 70%, #6f42c1 70% 84%, #333 84%); /* Updated gradient */
        }
        .color-btn-orange {
            background-color: #ff7e00;
        }
        .color-btn-white {
            background-color: #ffffff;
            border: 2px solid #ccc;
        }
        .color-btn-black {
            background-color: #181818;
        }

        .download-section {
            text-align: center;
            margin: 20px 0;
        }
        .download-btn {
            background: #ff7e00;
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            font-weight: bold;
            border-radius: 6px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 4px 8px rgba(255, 126, 0, 0.3);
            transition: all 0.3s ease;
        }
        .download-btn:hover {
            background: #e67300;
            transform: translateY(-2px);
        }
        .creatives-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 20px;
        }
        .creative {
            width: 360px;
            height: 360px;
            margin: 10px;
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            color: white;
            cursor: pointer;
        }
        .creative-vertical {
            width: 240px;
            height: 427px;
        }
        .creative-content {
            position: relative;
            z-index: 2;
            padding: 20px;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            text-align: center; /* Centrar texto */
        }
        .creative-title {
            font-size: 22px; /* Ajustado para mejor fit */
            font-weight: bold;
            margin-bottom: 10px;
            line-height: 1.2;
        }
        .creative-subtitle {
            font-size: 18px; /* Ajustado */
            font-weight: bold;
            margin-bottom: 10px;
            line-height: 1.2;
        }
        .creative-description {
            font-size: 14px; /* Ajustado */
            line-height: 1.4;
        }
        .creative-accent {
            position: absolute;
            left: 0;
            top: 30%;
            width: 6px;
            height: 100px;
            background: white;
            border-radius: 0 3px 3px 0;
            z-index: 10;
        }
        .creative-download {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: rgba(68, 68, 68, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 10;
        }
        .creative:hover .creative-download {
            opacity: 1;
        }
        .note {
            text-align: center;
            margin-top: 30px;
            color: #666;
            font-size: 12px;
        }
        .info-box {
            background-color: #e6f7ff;
            border-left: 4px solid #1890ff;
            padding: 15px;
            margin: 20px auto;
            max-width: 800px;
            border-radius: 4px;
            display: flex;
            align-items: flex-start;
        }
        .info-box i {
            color: #1890ff;
            font-size: 20px;
            margin-right: 10px;
            margin-top: 2px;
        }
        .info-box p {
            color: #333;
            font-size: 14px;
            margin: 0;
            line-height: 1.5;
        }
        .format-toggle {
            text-align: center;
            margin: 20px 0;
        }
        .format-btn {
            padding: 8px 16px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background-color: white;
            margin: 0 5px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .format-btn.active {
            background-color: #ff7e00;
            color: white;
            border-color: #ff7e00;
        }
        .best-practices {
            background-color: #f8f8f8;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
        }
        .best-practices h3 {
            font-size: 16px;
            color: #333;
            margin-bottom: 10px;
        }
        .best-practices ul {
            list-style-type: disc;
            margin-left: 20px;
        }
        .best-practices li {
            font-size: 13px;
            margin-bottom: 5px;
            color: #666;
        }
        .toggle-practices {
            display: block;
            margin: 10px auto;
            background: none;
            border: 1px solid #ddd;
            padding: 5px 10px;
            font-size: 12px;
            color: #666;
            cursor: pointer;
            border-radius: 4px;
        }
        /* Estilo para el logo, sin fondo */
        .logo-container {
            position: absolute;
            top: 10px;
            left: 10px;
            padding: 5px 10px;
            border-radius: 4px;
            z-index: 20;
            text-align: left; /* Asegurar alineaci√≥n izquierda del logo */
        }

        /* Estilos para el modal de carga */
        .loading-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        .loading-container {
            background-color: #fff;
            padding: 20px 30px;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            text-align: center;
        }
        .loading-spinner {
            display: inline-block;
            width: 30px;
            height: 30px;
            border: 4px solid rgba(0,0,0,.1);
            border-radius: 50%;
            border-top-color: #ff7e00;
            animation: spin 1s ease-in-out infinite;
            margin-bottom: 10px;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Canvas oculto */
        #downloadCanvas {
            position: absolute;
            left: -9999px;
            top: -9999px;
        }

        /* Text area style */
        .text-20-indicator {
            padding: 8px 12px;
            font-size: 13px;
            background-color: rgba(255, 126, 0, 0.1);
            border: 1px solid #ff7e00;
            color: #666;
            margin: 10px 0;
            border-radius: 4px;
            text-align: center;
        }

        /* Ad Copy Section Styles */
        .ad-copy-section {
            margin-top: 40px;
            border-top: 1px solid #eee;
            padding-top: 20px;
        }

        .ad-copy-section h3 {
            font-size: 18px;
            color: #333;
            text-align: center;
            margin-bottom: 15px;
        }

        .ad-copy-container {
            background-color: #f9f9f9;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            max-width: 800px;
            margin: 0 auto;
        }

        .ad-copy-text {
            font-size: 16px;
            line-height: 1.6;
            color: #444;
            white-space: pre-line;
        }

        .copy-btn {
            background: #f1f1f1;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 8px 16px;
            font-size: 14px;
            color: #555;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 15px auto 0;
            transition: all 0.3s ease;
        }

        .copy-btn:hover {
            background: #e9e9e9;
        }

        .copy-btn i {
            margin-right: 8px;
        }

        /* Campa√±a tipo indicador */
        .campaign-type-indicator {
            background-color: #f8fafa;
            border: 1px dashed #1890ff;
            border-radius: 4px;
            padding: 10px;
            margin: 15px 0;
            text-align: center;
            color: #1890ff;
            font-weight: 600;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 id="serviceTitle">Creativos de Tr√°fico para Optimizaci√≥n Express de Ads</h1> <!-- T√≠tulo inicial ajustado -->
             <!-- Subt√≠tulo actualizado -->
            <p>Anuncios optimizados para tus campa√±as de Ads (Meta, Google, etc.)</p>
        </div>

        <!-- Indicador de campa√±a -->
        <div class="campaign-type-indicator">
            <i class="fas fa-bullhorn"></i> <!-- Icono cambiado -->
            <span>Creativos Optimizados para Campa√±as de Ads</span> <!-- Texto actualizado -->
        </div>

        <!-- Tabs de servicios -->
        <div class="tabs">
            <div class="tab-group">
                 <!-- Texto del bot√≥n sin cambios, pero el contenido asociado s√≠ -->
                <button class="tab-button auditoria" data-service="auditoria">Auditor√≠a Gratis</button>
                <button class="tab-button optimizacion active" data-service="optimizacion">Optimizaci√≥n Express</button>
                <button class="tab-button meta" data-service="meta">Meta Ads</button>
                <button class="tab-button google" data-service="google">Google Ads</button>
                <button class="tab-button email" data-service="email">Email Marketing</button>
                <button class="tab-button chatbot" data-service="chatbot">Chatbot</button>
                <button class="tab-button all" data-service="all">Paquete Completo</button>
            </div>
        </div>

        <!-- Selector de formato -->
        <div class="format-toggle">
            <button id="squareBtn" class="format-btn active">Cuadrado (1080x1080)</button>
            <button id="verticalBtn" class="format-btn">Vertical (1080x1920)</button>
        </div>

        <!-- Selector de color de fondo -->
        <div class="color-toggle">
            <div class="color-btn color-btn-original active" data-color="original" title="Color original del servicio"></div>
            <div class="color-btn color-btn-orange" data-color="orange" title="Fondo naranja"></div>
            <div class="color-btn color-btn-white" data-color="white" title="Fondo blanco"></div>
            <div class="color-btn color-btn-black" data-color="black" title="Fondo negro"></div>
        </div>

        <!-- Secci√≥n de descarga -->
        <div class="download-section">
            <button id="downloadBtn" class="download-btn">
                <i class="fas fa-download"></i>
                Descargar Creativo
            </button>
        </div>

        <!-- Mensaje informativo -->
        <div class="info-box">
            <i class="fas fa-info-circle"></i>
            <div>
                <p><strong>Instrucciones:</strong></p>
                <p>1. Selecciona el tipo de servicio de Ads que deseas generar.</p> <!-- Texto ajustado -->
                <p>2. Elige el formato (cuadrado 1080x1080 o vertical 1080x1920).</p>
                <p>3. Selecciona el color de fondo (original, naranja, blanco o negro).</p>
                <p>4. Haz clic en "Descargar Creativo" para obtener la imagen en alta resoluci√≥n.</p>
                <p>5. Tambi√©n puedes descargar el creativo pasando el mouse sobre la imagen y haciendo clic en el icono de descarga.</p>
            </div>
        </div>

        <!-- Indicador de texto 20% -->
        <div class="text-20-indicator">
            <i class="fas fa-check-circle" style="color: #00b300;"></i>
            Texto optimizado (menos del 20% del espacio) - Aprobado para Meta Ads
        </div>

        <!-- Mejores pr√°cticas (colapsable) -->
        <div class="best-practices" style="display: none;">
             <!-- T√≠tulo actualizado -->
            <h3>Mejores Pr√°cticas para Anuncios de Tr√°fico Ads:</h3>
            <ul>
                <li><strong>Mensajes intrigantes</strong> - Copy que genera curiosidad y fomenta el clic</li>
                <li><strong>Im√°genes de alto impacto</strong> - Elementos visuales llamativos que captan atenci√≥n</li>
                <li><strong>Menos del 20% de texto</strong> - Facebook penaliza anuncios con exceso de texto</li>
                <li><strong>Colores contrastantes</strong> - Ajuste autom√°tico del contraste seg√∫n el fondo seleccionado</li>
                <li><strong>Propuesta de valor clara</strong> - Qu√© beneficio obtienen al hacer clic</li> <!-- Texto ajustado -->
                <li><strong>Llamada a la acci√≥n (CTA) clara</strong> - Enfocado en visitar, descubrir, explorar</li> <!-- Texto ajustado -->
                <li><strong>Composici√≥n centrada</strong> - Elementos principales visibles a primera vista</li>
            </ul>
        </div>
         <!-- Texto bot√≥n actualizado -->
        <button class="toggle-practices" id="togglePractices">Ver mejores pr√°cticas para Ads</button>

        <!-- Contenedor de creativos -->
        <div id="creativesContainer" class="creatives-container">
            <!-- El creativo se inserta din√°micamente aqu√≠ -->
        </div>

        <!-- Nota de especificaciones -->
        <div class="note">
            <p>Dimensiones: 1080x1080 p√≠xeles y 1080x1920 p√≠xeles (im√°genes descargadas en alta resoluci√≥n)</p>
        </div>

        <!-- Ad Copy Section -->
        <div class="ad-copy-section">
             <!-- T√≠tulo actualizado -->
            <h3>Copy Sugerido para Campa√±as de Ads (Tr√°fico)</h3>
            <div class="ad-copy-container">
                <p id="adCopyText" class="ad-copy-text">
                    <!-- El copy se inserta din√°micamente aqu√≠ -->
                </p>
                <button id="copyBtn" class="copy-btn">
                    <i class="fas fa-copy"></i> Copiar
                </button>
            </div>
        </div>

        <!-- Canvas para descargar (oculto) -->
        <canvas id="downloadCanvas"></canvas>
    </div>

    <script>
        // Colores actualizados para cada servicio
        const colors = {
            primary: '#ff7e00', // Naranja original
            dark: '#181818',
            light: '#ffffff',
            auditoria: '#28a745',
            optimizacion: '#dc3545',
            meta: '#1877F2',
            google: '#4285F4',
            googleRed: '#DB4437',
            googleYellow: '#F4B400',
            googleGreen: '#0F9D58',
            email: '#00829b',
            chatbot: '#6f42c1'
        };

        // --- DATOS DE CREATIVOS ACTUALIZADOS ---
        const creativesData = {
            auditoria: {
                title: 'AUDITOR√çA GRATIS DE ADS',
                subtitle: 'DESCUBRE QU√â FALLA',
                description: 'An√°lisis experto de tus campa√±as\nMeta Ads y Google Ads. Sin compromiso.',
                bgColor: colors.auditoria
            },
            optimizacion: {
                title: 'OPTIMIZACI√ìN EXPRESS DE ADS',
                subtitle: 'MEJORA TU ROAS EN 48HS',
                description: 'Ajuste r√°pido de campa√±as de Ads\nReduce costes, aumenta conversiones.',
                bgColor: colors.optimizacion
            },
            meta: {
                title: 'META ADS: VENTAS ASEGURADAS',
                subtitle: 'CAMPA√ëAS QUE S√ç CONVIERTEN',
                description: 'Gesti√≥n experta de campa√±as\nMeta Ads (FB/IG). ROAS 2.8X garantizado.',
                bgColor: colors.meta
            },
            google: {
                title: 'GOOGLE ADS: M√ÅS CLIENTES',
                subtitle: 'DOMINA LAS B√öSQUEDAS YA',
                description: 'Campa√±as rentables en Google Ads\nAtrae clientes listos para comprar.',
                bgColor: colors.google
            },
            email: {
                title: 'CAMPA√ëAS DE EMAIL MARKETING',
                subtitle: 'CONVIERTE SUSCRIPTORES',
                description: 'Optimizaci√≥n Express de campa√±as\nde Email Marketing. M√°s aperturas y ventas.',
                bgColor: colors.email
            },
            chatbot: {
                title: 'CAMPA√ëAS CON CHATBOTS',
                subtitle: 'AUTOMATIZA Y VENDE M√ÅS',
                description: 'Optimizaci√≥n Express de Chatbots\npara tus campa√±as. Captura leads 24/7.',
                bgColor: colors.chatbot
            },
            all: {
                title: 'PAQUETE ADS COMPLETO',
                subtitle: 'MAXIMIZA TU ROI GLOBAL',
                description: 'Meta Ads + Google Ads + Email + Chatbot\nOptimizaci√≥n integral por $1000/mes.',
                bgColor: '#333333'
            }
        };

        // --- DATOS DE COPY ACTUALIZADOS ---
        const adCopyData = {
            auditoria: `üîç ¬øTus campa√±as de Meta Ads y Google Ads no rinden como esperabas? üîç

Descubre EXACTAMENTE d√≥nde est√°s perdiendo dinero y qu√© corregir.

¬°Solicita tu Auditor√≠a de Ads GRATUITA! ‚è±Ô∏è

‚úÖ An√°lisis detallado de estructura y configuraci√≥n.
‚úÖ Identificaci√≥n de fugas de presupuesto.
‚úÖ Recomendaciones claras para optimizar YA.
‚úÖ 100% Gratis, sin compromiso.

üëâ Visita nuestra web y pide tu auditor√≠a antes de que se acaben los cupos semanales. ¬°Deja de tirar dinero!

‚û°Ô∏è www.orangevapor.com`,

            optimizacion: `‚ö° ¬øCampa√±as de Ads activas pero SIN resultados? ¬°Optimizaci√≥n Express en 48hs! ‚ö°

Det√©n el gasto innecesario y empieza a ver conversiones REALES.

Nuestro servicio r√°pido incluye:
‚úÖ Diagn√≥stico de puntos d√©biles.
‚úÖ Reestructuraci√≥n para m√°ximo rendimiento.
‚úÖ Ajuste de segmentaciones y creativos.
‚úÖ ¬°Resultados visibles en d√≠as!

üëâ Descubre en nuestra web c√≥mo recuperamos campa√±as "perdidas" y multiplicamos su ROAS.

¬øListo para transformar tus Ads? Visita üëá
www.orangevapor.com`,

            meta: `üì± ¬øInviertes en Meta Ads (Facebook/Instagram) pero las ventas no llegan? üì±

¬°Deja de adivinar! Nuestras campa√±as tienen un ROAS m√≠nimo GARANTIZADO de 2.8x.

‚úÖ Estrategia personalizada para TU negocio.
‚úÖ Optimizaci√≥n continua basada en datos.
‚úÖ Reducci√≥n del costo por adquisici√≥n (CPA).
‚úÖ Reportes claros y enfocados en ROI.

üëâ Mira casos de √©xito en nuestra web y comprueba c√≥mo escalamos ventas con Meta Ads.

¬°Es hora de que tus Ads trabajen para ti! Haz clic üëá
www.orangevapor.com`,

            google: `üîé ¬øTu competencia aparece en Google Ads y t√∫ no? ¬°Pierdes clientes! üîé

Convierte b√∫squedas activas en ventas con campa√±as de Google Ads OPTIMIZADAS.

‚úÖ ROAS m√≠nimo 2.8x GARANTIZADO.
‚úÖ Palabras clave que S√ç convierten.
‚úÖ Optimizaci√≥n de concordancias y negativas.
‚úÖ Anuncios atractivos que destacan.

üëâ Visita nuestra web y descubre c√≥mo llevamos negocios a la cima de Google, reduciendo su CPA.

¬°Aparece donde te buscan tus clientes! üëá
www.orangevapor.com`,

            email: `üìß ¬øTienes una lista de emails pero no genera ventas? ¬°Optimiza tus Campa√±as de Email Marketing! üìß

Transforma suscriptores inactivos en clientes recurrentes.

‚úÖ Secuencias automatizadas que nutren y venden.
‚úÖ Segmentaci√≥n avanzada para mensajes relevantes.
‚úÖ Aumento de tasa de apertura y clics (CTR).
‚úÖ Genera ingresos pasivos con tu base de datos.

üëâ Descubre en nuestra web c√≥mo revitalizamos campa√±as de email marketing olvidadas.

¬°Monetiza tu lista AHORA! üëá
www.orangevapor.com`,

            chatbot: `ü§ñ ¬øPierdes leads y ventas por no responder al instante? ¬°Potencia tus Campa√±as con Chatbots! ü§ñ

Integra chatbots inteligentes para MAXIMIZAR la conversi√≥n de tus Ads.

‚úÖ Captura y cualifica leads 24/7.
‚úÖ Responde preguntas frecuentes al instante.
‚úÖ Gu√≠a a los usuarios hacia la compra.
‚úÖ Libera a tu equipo para tareas complejas.

üëâ Visita nuestra web y ve c√≥mo los chatbots mejoran el ROI de las campa√±as de marketing.

¬°No pierdas ni un lead m√°s! üëá
www.orangevapor.com`,

            all: `üöÄ ¬°La Estrategia de Ads COMPLETA que tu negocio necesita! üöÄ

¬øPor qu√© optimizar un solo canal cuando puedes dominar TODOS?

Nuestro Paquete Integral incluye Optimizaci√≥n Express para:
‚úÖ Meta Ads (Facebook & Instagram)
‚úÖ Google Ads (B√∫squeda, Display, etc.)
‚úÖ Campa√±as de Email Marketing
‚úÖ Campa√±as con Chatbots

üëâ Ahorra $200/mes con el paquete completo ($1000 vs $1200 por separado) y obt√©n resultados sin√©rgicos. ¬°Visita nuestra web!

Maximiza tu presencia y ROI en todos los frentes üëá
www.orangevapor.com`
        };

        // Estado actual
        let activeService = 'optimizacion';
        let activeFormat = 'square'; // 'square' o 'vertical'
        let activeColor = 'original'; // 'original', 'orange', 'white', 'black'
        let isProcessing = false;

        // Elementos del DOM
        const serviceTitle = document.getElementById('serviceTitle');
        const creativesContainer = document.getElementById('creativesContainer');
        const tabButtons = document.querySelectorAll('.tab-button');
        const formatButtons = document.querySelectorAll('.format-btn');
        const colorButtons = document.querySelectorAll('.color-btn');
        const squareBtn = document.getElementById('squareBtn');
        const verticalBtn = document.getElementById('verticalBtn');
        const downloadBtn = document.getElementById('downloadBtn');
        const togglePracticesBtn = document.getElementById('togglePractices');
        const bestPracticesBox = document.querySelector('.best-practices');
        const downloadCanvas = document.getElementById('downloadCanvas');
        const adCopyText = document.getElementById('adCopyText');
        const copyBtn = document.getElementById('copyBtn');

        // Funci√≥n para copiar texto al portapapeles
        copyBtn.addEventListener('click', () => {
            const textToCopy = adCopyText.textContent || adCopyText.innerText; //innerText for safety
            navigator.clipboard.writeText(textToCopy)
                .then(() => {
                    copyBtn.innerHTML = '<i class="fas fa-check"></i> Copiado!';
                    setTimeout(() => {
                        copyBtn.innerHTML = '<i class="fas fa-copy"></i> Copiar';
                    }, 2000);
                })
                .catch(err => {
                    console.error('Error al copiar: ', err);
                    copyBtn.innerHTML = '<i class="fas fa-times"></i> Error';
                    setTimeout(() => {
                        copyBtn.innerHTML = '<i class="fas fa-copy"></i> Copiar';
                    }, 2000);
                });
        });

        // Toggle para mejores pr√°cticas
        togglePracticesBtn.addEventListener('click', () => {
            if (bestPracticesBox.style.display === 'none' || bestPracticesBox.style.display === '') {
                bestPracticesBox.style.display = 'block';
                togglePracticesBtn.textContent = 'Ocultar mejores pr√°cticas';
            } else {
                bestPracticesBox.style.display = 'none';
                 // Texto bot√≥n actualizado
                togglePracticesBtn.textContent = 'Ver mejores pr√°cticas para Ads';
            }
        });

        // Funci√≥n para obtener t√≠tulo seg√∫n el servicio
        function getServiceTitle(service) {
            // Usamos los t√≠tulos definidos en creativesData para coherencia
            const titleMap = {
                auditoria: 'Creativos para Auditor√≠a Gratis de Ads',
                optimizacion: 'Creativos para Optimizaci√≥n Express de Ads',
                meta: 'Creativos para Campa√±as de Meta Ads',
                google: 'Creativos para Campa√±as de Google Ads',
                email: 'Creativos para Campa√±as de Email Marketing',
                chatbot: 'Creativos para Campa√±as con Chatbots',
                all: 'Creativos para Paquete de Ads Completo'
            };
            // A√±adir 'Tr√°fico' al t√≠tulo din√°mico
            return titleMap[service] ? `Tr√°fico: ${titleMap[service]}` : 'Creativos de Tr√°fico para Ads';
        }

        // Funci√≥n para obtener color de fondo seg√∫n la selecci√≥n
        function getBgColor() {
            if (activeColor === 'original') {
                // Asegurarse de que el servicio exista en creativesData
                return creativesData[activeService]?.bgColor || colors.primary;
            } else if (activeColor === 'orange') {
                return colors.primary;
            } else if (activeColor === 'white') {
                return colors.light;
            } else if (activeColor === 'black') {
                return colors.dark;
            }
            return colors.primary; // Fallback
        }

        // Funci√≥n para obtener color de texto seg√∫n el fondo
        function getTextColor(bgColor) {
            if (!bgColor) return colors.dark; // Fallback

            let rgb;
            if (bgColor.startsWith('#')) {
                const bigint = parseInt(bgColor.slice(1), 16);
                rgb = { r: (bigint >> 16) & 255, g: (bigint >> 8) & 255, b: bigint & 255 };
            } else if (bgColor.startsWith('rgb')) {
                const matches = bgColor.match(/\d+/g);
                if (!matches || matches.length < 3) return colors.dark; // Fallback
                rgb = { r: parseInt(matches[0]), g: parseInt(matches[1]), b: parseInt(matches[2]) };
            } else {
                return colors.dark; // Fallback for unknown format
            }

            const luminance = (0.299 * rgb.r + 0.587 * rgb.g + 0.114 * rgb.b) / 255;
            return luminance > 0.5 ? colors.dark : colors.light;
        }

        // Funci√≥n para obtener color de acento seg√∫n el fondo
        function getAccentColor(bgColor) {
            const textColor = getTextColor(bgColor);
            if (activeColor === 'orange') return textColor;
            if (activeColor === 'white' || activeColor === 'black') return colors.primary;
            return textColor; // Para color original, usa el mismo que el texto
        }


        // Funci√≥n para renderizar creativo en la interfaz
        function renderCreative() {
            creativesContainer.innerHTML = '';
            const creative = creativesData[activeService];
            if (!creative) {
                 console.error("Datos no encontrados para el servicio:", activeService);
                 return; // Salir si no hay datos
            }

            const bgColor = getBgColor();
            const textColor = getTextColor(bgColor);
            const accentColor = getAccentColor(bgColor);

            const creativeEl = document.createElement('div');
            creativeEl.className = `creative ${activeFormat === 'vertical' ? 'creative-vertical' : ''}`;
            creativeEl.style.backgroundColor = bgColor;

            const accentEl = document.createElement('div');
            accentEl.className = 'creative-accent';
            accentEl.style.background = accentColor;
            creativeEl.appendChild(accentEl);

            const contentEl = document.createElement('div');
            contentEl.className = 'creative-content';

            const logoContainerEl = document.createElement('div');
            logoContainerEl.className = 'logo-container';
            const logoEl = document.createElement('div');
            logoEl.style.fontWeight = 'bold';
            logoEl.style.fontSize = '14px'; // Tama√±o consistente

            // L√≥gica de color del logo
            if (activeColor === 'white') {
                logoEl.innerHTML = `<span style="color: ${colors.dark};">Orange</span> <span style="color: ${colors.primary};">Vapor</span>`;
            } else if (activeColor === 'orange') {
                 logoEl.innerHTML = `<span style="color: ${colors.light};">Orange Vapor</span>`;
            } else {
                 logoEl.innerHTML = `<span style="color: ${textColor};">Orange</span> <span style="color: ${colors.primary};">Vapor</span>`;
            }

            logoContainerEl.appendChild(logoEl);
            contentEl.appendChild(logoContainerEl); // A√±adir logo al principio del contenido

            // --- A√±adir Textos ---
             const titleEl = document.createElement('div');
             titleEl.className = 'creative-title';
             titleEl.textContent = creative.title;
             titleEl.style.color = textColor;
             // Ajustar posici√≥n Y si es necesario para no solapar logo (ej. con padding-top)
             titleEl.style.paddingTop = '50px'; // Espacio para el logo
             contentEl.appendChild(titleEl);

             const subtitleEl = document.createElement('div');
             subtitleEl.className = 'creative-subtitle';
             subtitleEl.textContent = creative.subtitle;
             subtitleEl.style.color = textColor;
             contentEl.appendChild(subtitleEl);

             const descEl = document.createElement('div');
             descEl.className = 'creative-description';
             descEl.style.whiteSpace = 'pre-line';
             descEl.textContent = creative.description;
             descEl.style.color = textColor;
             contentEl.appendChild(descEl);

            creativeEl.appendChild(contentEl);

            // Bot√≥n de descarga overlay
            const downloadEl = document.createElement('div');
            downloadEl.className = 'creative-download';
            downloadEl.innerHTML = `<i class="fas fa-download" style="color: ${colors.light};"></i>`;
            downloadEl.addEventListener('click', (e) => {
                e.stopPropagation();
                generateAndDownloadImage();
            });
            creativeEl.appendChild(downloadEl);

            creativeEl.addEventListener('click', generateAndDownloadImage); // Clic en toda la imagen tambi√©n descarga

            creativesContainer.appendChild(creativeEl);

            updateAdCopy(); // Actualizar el copy asociado
        }


        // Funci√≥n para actualizar el copy del anuncio
        function updateAdCopy() {
            adCopyText.textContent = adCopyData[activeService] || "Copy de anuncio no disponible para este servicio.";
             // Resetear bot√≥n de copiar
             copyBtn.innerHTML = '<i class="fas fa-copy"></i> Copiar';
        }

        // Funciones showLoadingModal y hideLoadingModal (sin cambios)
        function showLoadingModal(message = "Generando imagen...") {
            if (document.getElementById('loadingModal')) return; // Evitar duplicados
            const modalEl = document.createElement('div');
            modalEl.className = 'loading-modal';
            modalEl.id = 'loadingModal';
            modalEl.innerHTML = `
                <div class="loading-container">
                    <div class="loading-spinner"></div>
                    <div>${message}</div>
                </div>`;
            document.body.appendChild(modalEl);
        }
        function hideLoadingModal() {
            const modal = document.getElementById('loadingModal');
            if (modal) {
                document.body.removeChild(modal);
            }
        }


       // Funci√≥n para dibujar y descargar la imagen
        function generateAndDownloadImage() {
            if (isProcessing) return;
            isProcessing = true;
            showLoadingModal();

            // Usar setTimeout para permitir que el modal se renderice antes del procesamiento pesado
            setTimeout(() => {
                try {
                    const creative = creativesData[activeService];
                     if (!creative) throw new Error(`Datos no encontrados para ${activeService}`);

                    const isVertical = activeFormat === 'vertical';
                    const width = isVertical ? 1080 : 1080;
                    const height = isVertical ? 1920 : 1080;

                    downloadCanvas.width = width;
                    downloadCanvas.height = height;
                    const ctx = downloadCanvas.getContext('2d');
                    ctx.clearRect(0, 0, width, height);

                    const bgColor = getBgColor();
                    const textColor = getTextColor(bgColor);
                    const accentColor = getAccentColor(bgColor);

                    // 1. Fondo
                    ctx.fillStyle = bgColor;
                    ctx.fillRect(0, 0, width, height);

                    // 2. Acento lateral
                    ctx.fillStyle = accentColor;
                    const accentWidth = isVertical ? 20 : 15;
                    const accentHeightRatio = isVertical ? 0.4 : 0.3; // Ajustar altura relativa
                    const accentYRatio = isVertical ? 0.3 : 0.35; // Ajustar posici√≥n Y relativa
                    ctx.fillRect(0, height * accentYRatio, accentWidth, height * accentHeightRatio);


                    // 3. Logo (posici√≥n fija superior izquierda)
                    const logoFontSize = isVertical ? 42 : 36;
                    ctx.font = `bold ${logoFontSize}px Montserrat, sans-serif`;
                    ctx.textAlign = 'left'; // Alinear logo a la izquierda
                    const logoX = 40;
                    const logoY = 60; // Posici√≥n Y fija

                     // L√≥gica de color del logo para canvas
                    if (activeColor === 'white') {
                        ctx.fillStyle = colors.dark; // Negro
                        ctx.fillText('Orange', logoX, logoY);
                        const orangeWidth = ctx.measureText('Orange ').width;
                        ctx.fillStyle = colors.primary; // Naranja
                        ctx.fillText('Vapor', logoX + orangeWidth, logoY);
                    } else if (activeColor === 'orange') {
                         ctx.fillStyle = colors.light; // Blanco
                         ctx.fillText('Orange Vapor', logoX, logoY);
                    } else {
                         ctx.fillStyle = textColor; // Color del texto principal
                         ctx.fillText('Orange', logoX, logoY);
                         const orangeWidth = ctx.measureText('Orange ').width;
                         ctx.fillStyle = colors.primary; // Naranja
                         ctx.fillText('Vapor', logoX + orangeWidth, logoY);
                    }


                    // 4. Textos (Centrados, ajustando Y para no solapar logo)
                    ctx.textAlign = 'center';
                    const contentStartY = logoY + 80; // Empezar contenido debajo del logo
                    const contentCenterY = contentStartY + (height - contentStartY) / 2; // Centro del √°rea restante
                    const textMaxWidth = width - 100; // Margen lateral

                    // T√≠tulo
                    const titleFontSize = isVertical ? 80 : 70;
                    ctx.font = `bold ${titleFontSize}px Montserrat, sans-serif`;
                    ctx.fillStyle = textColor;
                    const titleLineHeight = titleFontSize * 1.1;
                    const titleY = isVertical ? contentCenterY - 150 : contentCenterY - 80;
                    wrapText(ctx, creative.title, width / 2, titleY, textMaxWidth, titleLineHeight);

                    // Subt√≠tulo (Obtener la Y final del t√≠tulo para posicionar debajo)
                    const titleLines = calculateWrappedLines(ctx, creative.title, textMaxWidth);
                    const subtitleY = titleY + (titleLines * titleLineHeight) + (isVertical ? 20 : 30); // Espacio despu√©s del t√≠tulo
                    const subtitleFontSize = isVertical ? 56 : 46;
                    ctx.font = `bold ${subtitleFontSize}px Montserrat, sans-serif`;
                    ctx.fillStyle = textColor;
                    ctx.fillText(creative.subtitle, width / 2, subtitleY);

                    // Descripci√≥n
                    const descY = subtitleY + subtitleFontSize + (isVertical ? 60 : 50); // Espacio despu√©s del subt√≠tulo
                    const descFontSize = isVertical ? 42 : 36;
                    const descLineHeight = descFontSize * 1.2;
                    ctx.font = `${descFontSize}px Montserrat, sans-serif`;
                    ctx.fillStyle = textColor;
                    wrapText(ctx, creative.description, width / 2, descY, textMaxWidth, descLineHeight);


                    // 5. Descargar
                    const dataUrl = downloadCanvas.toDataURL('image/png');
                    const link = document.createElement('a');
                    link.href = dataUrl;
                    link.download = `trafico-ads-${activeService}-${activeColor}-${activeFormat}.png`;
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);

                    hideLoadingModal();
                    isProcessing = false;

                } catch (error) {
                    console.error('Error al generar/descargar la imagen:', error);
                    hideLoadingModal();
                    alert(`Hubo un error al generar la imagen: ${error.message}. Por favor intenta de nuevo.`);
                    isProcessing = false;
                }
            }, 100); // Peque√±o delay para renderizar modal
        }


        // Funci√≥n auxiliar para wrapText (sin cambios)
        function wrapText(ctx, text, x, y, maxWidth, lineHeight) {
            const words = text.split(/[\s\n]+/); // Dividir por espacio o salto de l√≠nea manual
            let line = '';
            let currentY = y;

            for (let n = 0; n < words.length; n++) {
                const testLine = line + words[n] + ' ';
                const metrics = ctx.measureText(testLine);
                const testWidth = metrics.width;

                if (testWidth > maxWidth && n > 0) {
                    ctx.fillText(line.trim(), x, currentY);
                    line = words[n] + ' ';
                    currentY += lineHeight;
                } else {
                    line = testLine;
                }
            }
            ctx.fillText(line.trim(), x, currentY);
        }

        // Funci√≥n auxiliar para calcular l√≠neas envueltas (necesaria para posicionar elementos)
         function calculateWrappedLines(ctx, text, maxWidth) {
             const words = text.split(/[\s\n]+/);
             let line = '';
             let lines = 1;
             for (let n = 0; n < words.length; n++) {
                 const testLine = line + words[n] + ' ';
                 const metrics = ctx.measureText(testLine);
                 const testWidth = metrics.width;
                 if (testWidth > maxWidth && n > 0) {
                     lines++;
                     line = words[n] + ' ';
                 } else {
                     line = testLine;
                 }
             }
             return lines;
         }


        // Funci√≥n para actualizar UI
        function updateUI() {
            serviceTitle.textContent = getServiceTitle(activeService);

            tabButtons.forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.service === activeService) {
                    btn.classList.add('active');
                }
            });

            formatButtons.forEach(btn => btn.classList.remove('active'));
            if (activeFormat === 'square') {
                squareBtn.classList.add('active');
            } else {
                verticalBtn.classList.add('active');
            }

            colorButtons.forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.color === activeColor) {
                    btn.classList.add('active');
                }
            });

            renderCreative(); // Esto tambi√©n llamar√° a updateAdCopy
        }

        // Eventos (sin cambios en la l√≥gica)
        tabButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                activeService = btn.dataset.service;
                updateUI();
            });
        });
        squareBtn.addEventListener('click', () => {
            activeFormat = 'square';
            updateUI();
        });
        verticalBtn.addEventListener('click', () => {
            activeFormat = 'vertical';
            updateUI();
        });
        colorButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                activeColor = btn.dataset.color;
                updateUI();
            });
        });
        downloadBtn.addEventListener('click', generateAndDownloadImage);

        // Inicializar
        updateUI();
    </script>
</body>
</html>
