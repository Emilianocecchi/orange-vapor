import React, { useState, useEffect, useCallback, useMemo, useRef } from 'react';
import { 
  BookOpen, CheckCircle, Brain, Trophy, ChevronRight, ChevronLeft, 
  Volume2, RefreshCcw, Home, BarChart, Lock, Star, Flame, Heart,
  Target, Zap, Award, TrendingUp, Clock, Calendar, Settings,
  Moon, Sun, X, Check, AlertCircle, Sparkles, GraduationCap,
  Headphones, PenTool, Eye, Shuffle, RotateCcw, Play, Pause,
  ChevronDown, ChevronUp, Info, Gift, Crown, Medal, Shield
} from 'lucide-react';

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// HSK1 COMPLETE DATABASE - 150 OFFICIAL WORDS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const courseData = [
  {
    id: 1,
    title: "Saludos y CortesÃ­a",
    subtitle: "é—®å€™ä¸Žç¤¼è²Œ",
    description: "Las expresiones fundamentales para cualquier interacciÃ³n social.",
    icon: "ðŸ‘‹",
    color: "from-emerald-500 to-teal-600",
    bgPattern: "emerald",
    grammar: [
      { title: "La estructura bÃ¡sica", content: "En chino, las frases de saludo suelen ser muy directas. ä½ å¥½ (nÇ hÇŽo) literalmente significa 'tÃº bueno', pero se usa como 'hola'." },
      { title: "Formalidad", content: "Para ser mÃ¡s formal, usa æ‚¨å¥½ (nÃ­n hÇŽo) con personas mayores o en contextos profesionales." }
    ],
    content: [
      { id: '1-1', hanzi: 'ä½ å¥½', pinyin: 'nÇ hÇŽo', translation: 'Hola', type: 'saludo', example: 'ä½ å¥½ï¼Œæˆ‘æ˜¯å­¦ç”Ÿã€‚', exampleTr: 'Hola, soy estudiante.', audio: true, difficulty: 1 },
      { id: '1-2', hanzi: 'æ‚¨å¥½', pinyin: 'nÃ­n hÇŽo', translation: 'Hola (formal)', type: 'saludo', example: 'æ‚¨å¥½ï¼ŒçŽ‹è€å¸ˆï¼', exampleTr: 'Â¡Hola, profesor Wang!', audio: true, difficulty: 2 },
      { id: '1-3', hanzi: 'å†è§', pinyin: 'zÃ i jiÃ n', translation: 'AdiÃ³s', type: 'despedida', example: 'æ˜Žå¤©è§ï¼Œå†è§ï¼', exampleTr: 'Â¡Nos vemos maÃ±ana, adiÃ³s!', audio: true, difficulty: 1 },
      { id: '1-4', hanzi: 'è°¢è°¢', pinyin: 'xiÃ¨ xie', translation: 'Gracias', type: 'cortesÃ­a', example: 'è°¢è°¢ä½ çš„å¸®åŠ©ã€‚', exampleTr: 'Gracias por tu ayuda.', audio: true, difficulty: 1 },
      { id: '1-5', hanzi: 'ä¸å®¢æ°”', pinyin: 'bÃº kÃ¨ qi', translation: 'De nada', type: 'cortesÃ­a', example: 'A: è°¢è°¢ï¼B: ä¸å®¢æ°”ã€‚', exampleTr: 'A: Â¡Gracias! B: De nada.', audio: true, difficulty: 2 },
      { id: '1-6', hanzi: 'å¯¹ä¸èµ·', pinyin: 'duÃ¬ bu qÇ', translation: 'Lo siento / PerdÃ³n', type: 'cortesÃ­a', example: 'å¯¹ä¸èµ·ï¼Œæˆ‘è¿Ÿåˆ°äº†ã€‚', exampleTr: 'Lo siento, lleguÃ© tarde.', audio: true, difficulty: 2 },
      { id: '1-7', hanzi: 'æ²¡å…³ç³»', pinyin: 'mÃ©i guÄn xi', translation: 'No importa / EstÃ¡ bien', type: 'cortesÃ­a', example: 'A: å¯¹ä¸èµ·ã€‚B: æ²¡å…³ç³»ã€‚', exampleTr: 'A: PerdÃ³n. B: No pasa nada.', audio: true, difficulty: 2 },
      { id: '1-8', hanzi: 'è¯·', pinyin: 'qÇng', translation: 'Por favor / Invitar', type: 'cortesÃ­a', example: 'è¯·åã€‚', exampleTr: 'Por favor, siÃ©ntate.', audio: true, difficulty: 1 },
    ]
  },
  {
    id: 2,
    title: "Pronombres Personales",
    subtitle: "äººç§°ä»£è¯",
    description: "IdentifÃ­cate y refiere a otros con precisiÃ³n.",
    icon: "ðŸ‘¤",
    color: "from-blue-500 to-indigo-600",
    bgPattern: "blue",
    grammar: [
      { title: "Plurales", content: "Agrega ä»¬ (men) a cualquier pronombre singular para hacerlo plural: æˆ‘â†’æˆ‘ä»¬, ä½ â†’ä½ ä»¬, ä»–â†’ä»–ä»¬" },
      { title: "GÃ©nero", content: "ä»– (Ã©l), å¥¹ (ella), å®ƒ (ello) suenan igual (tÄ) pero se escriben diferente." }
    ],
    content: [
      { id: '2-1', hanzi: 'æˆ‘', pinyin: 'wÇ’', translation: 'Yo', type: 'pronombre', example: 'æˆ‘æ˜¯ä¸­å›½äººã€‚', exampleTr: 'Soy chino.', audio: true, difficulty: 1 },
      { id: '2-2', hanzi: 'ä½ ', pinyin: 'nÇ', translation: 'TÃº', type: 'pronombre', example: 'ä½ æ˜¯è°ï¼Ÿ', exampleTr: 'Â¿QuiÃ©n eres tÃº?', audio: true, difficulty: 1 },
      { id: '2-3', hanzi: 'æ‚¨', pinyin: 'nÃ­n', translation: 'Usted (formal)', type: 'pronombre', example: 'æ‚¨è´µå§“ï¼Ÿ', exampleTr: 'Â¿CuÃ¡l es su apellido?', audio: true, difficulty: 2 },
      { id: '2-4', hanzi: 'ä»–', pinyin: 'tÄ', translation: 'Ã‰l', type: 'pronombre', example: 'ä»–æ˜¯æˆ‘çš„æœ‹å‹ã€‚', exampleTr: 'Ã‰l es mi amigo.', audio: true, difficulty: 1 },
      { id: '2-5', hanzi: 'å¥¹', pinyin: 'tÄ', translation: 'Ella', type: 'pronombre', example: 'å¥¹å¾ˆæ¼‚äº®ã€‚', exampleTr: 'Ella es muy bonita.', audio: true, difficulty: 1 },
      { id: '2-6', hanzi: 'æˆ‘ä»¬', pinyin: 'wÇ’ men', translation: 'Nosotros', type: 'pronombre', example: 'æˆ‘ä»¬æ˜¯å­¦ç”Ÿã€‚', exampleTr: 'Somos estudiantes.', audio: true, difficulty: 1 },
      { id: '2-7', hanzi: 'ä»–ä»¬', pinyin: 'tÄ men', translation: 'Ellos/Ellas', type: 'pronombre', example: 'ä»–ä»¬åœ¨å“ªå„¿ï¼Ÿ', exampleTr: 'Â¿DÃ³nde estÃ¡n ellos?', audio: true, difficulty: 1 },
      { id: '2-8', hanzi: 'è¿™', pinyin: 'zhÃ¨', translation: 'Este/Esto', type: 'demostrativo', example: 'è¿™æ˜¯ä»€ä¹ˆï¼Ÿ', exampleTr: 'Â¿QuÃ© es esto?', audio: true, difficulty: 1 },
      { id: '2-9', hanzi: 'é‚£', pinyin: 'nÃ ', translation: 'Ese/Eso/Aquel', type: 'demostrativo', example: 'é‚£æ˜¯æˆ‘çš„ä¹¦ã€‚', exampleTr: 'Ese es mi libro.', audio: true, difficulty: 1 },
      { id: '2-10', hanzi: 'å“ª', pinyin: 'nÇŽ', translation: 'Â¿CuÃ¡l? Â¿QuÃ©?', type: 'interrogativo', example: 'ä½ æ˜¯å“ªå›½äººï¼Ÿ', exampleTr: 'Â¿De quÃ© paÃ­s eres?', audio: true, difficulty: 2 },
    ]
  },
  {
    id: 3,
    title: "NÃºmeros del 1 al 10",
    subtitle: "æ•°å­— ä¸€åˆ°å",
    description: "La base de todo cÃ¡lculo y expresiÃ³n numÃ©rica.",
    icon: "ðŸ”¢",
    color: "from-violet-500 to-purple-600",
    bgPattern: "violet",
    grammar: [
      { title: "Contar con los dedos", content: "Los chinos usan una mano para contar del 1 al 10 con gestos Ãºnicos. Es Ãºtil aprenderlos." },
      { title: "äºŒ vs ä¸¤", content: "äºŒ (Ã¨r) se usa para contar y en nÃºmeros. ä¸¤ (liÇŽng) se usa antes de clasificadores: ä¸¤ä¸ªäºº (dos personas)." }
    ],
    content: [
      { id: '3-1', hanzi: 'ä¸€', pinyin: 'yÄ«', translation: 'Uno (1)', type: 'nÃºmero', example: 'ä¸€ä¸ªè‹¹æžœã€‚', exampleTr: 'Una manzana.', audio: true, difficulty: 1 },
      { id: '3-2', hanzi: 'äºŒ', pinyin: 'Ã¨r', translation: 'Dos (2)', type: 'nÃºmero', example: 'ç¬¬äºŒä¸ªã€‚', exampleTr: 'El segundo.', audio: true, difficulty: 1 },
      { id: '3-3', hanzi: 'ä¸‰', pinyin: 'sÄn', translation: 'Tres (3)', type: 'nÃºmero', example: 'ä¸‰æœˆã€‚', exampleTr: 'Marzo.', audio: true, difficulty: 1 },
      { id: '3-4', hanzi: 'å››', pinyin: 'sÃ¬', translation: 'Cuatro (4)', type: 'nÃºmero', example: 'å››ç‚¹ã€‚', exampleTr: 'Las cuatro.', audio: true, difficulty: 1 },
      { id: '3-5', hanzi: 'äº”', pinyin: 'wÇ”', translation: 'Cinco (5)', type: 'nÃºmero', example: 'äº”å²ã€‚', exampleTr: 'Cinco aÃ±os.', audio: true, difficulty: 1 },
      { id: '3-6', hanzi: 'å…­', pinyin: 'liÃ¹', translation: 'Seis (6)', type: 'nÃºmero', example: 'å…­ä¸ªäººã€‚', exampleTr: 'Seis personas.', audio: true, difficulty: 1 },
      { id: '3-7', hanzi: 'ä¸ƒ', pinyin: 'qÄ«', translation: 'Siete (7)', type: 'nÃºmero', example: 'ä¸ƒå¤©ã€‚', exampleTr: 'Siete dÃ­as.', audio: true, difficulty: 1 },
      { id: '3-8', hanzi: 'å…«', pinyin: 'bÄ', translation: 'Ocho (8)', type: 'nÃºmero', example: 'å…«æœˆã€‚', exampleTr: 'Agosto.', audio: true, difficulty: 1 },
      { id: '3-9', hanzi: 'ä¹', pinyin: 'jiÇ”', translation: 'Nueve (9)', type: 'nÃºmero', example: 'ä¹å—é’±ã€‚', exampleTr: 'Nueve yuanes.', audio: true, difficulty: 1 },
      { id: '3-10', hanzi: 'å', pinyin: 'shÃ­', translation: 'Diez (10)', type: 'nÃºmero', example: 'ååˆ†é’Ÿã€‚', exampleTr: 'Diez minutos.', audio: true, difficulty: 1 },
      { id: '3-11', hanzi: 'ä¸¤', pinyin: 'liÇŽng', translation: 'Dos (antes de clasificador)', type: 'nÃºmero', example: 'ä¸¤ä¸ªå­¦ç”Ÿã€‚', exampleTr: 'Dos estudiantes.', audio: true, difficulty: 2 },
      { id: '3-12', hanzi: 'é›¶', pinyin: 'lÃ­ng', translation: 'Cero (0)', type: 'nÃºmero', example: 'é›¶åº¦ã€‚', exampleTr: 'Cero grados.', audio: true, difficulty: 1 },
    ]
  },
  {
    id: 4,
    title: "La Familia",
    subtitle: "å®¶åº­",
    description: "Vocabulario esencial para hablar de tu entorno mÃ¡s cercano.",
    icon: "ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦",
    color: "from-rose-500 to-pink-600",
    bgPattern: "rose",
    grammar: [
      { title: "Posesivos", content: "Agrega çš„ (de) despuÃ©s del pronombre para indicar posesiÃ³n: æˆ‘çš„ (mi), ä½ çš„ (tu), ä»–çš„ (su)" },
      { title: "Familia extendida", content: "El chino tiene tÃ©rminos especÃ­ficos para cada pariente segÃºn si es paterno/materno, mayor/menor." }
    ],
    content: [
      { id: '4-1', hanzi: 'çˆ¸çˆ¸', pinyin: 'bÃ  ba', translation: 'PapÃ¡', type: 'familia', example: 'æˆ‘çˆ¸çˆ¸æ˜¯åŒ»ç”Ÿã€‚', exampleTr: 'Mi papÃ¡ es mÃ©dico.', audio: true, difficulty: 1 },
      { id: '4-2', hanzi: 'å¦ˆå¦ˆ', pinyin: 'mÄ ma', translation: 'MamÃ¡', type: 'familia', example: 'æˆ‘çˆ±å¦ˆå¦ˆã€‚', exampleTr: 'Amo a mamÃ¡.', audio: true, difficulty: 1 },
      { id: '4-3', hanzi: 'å„¿å­', pinyin: 'Ã©r zi', translation: 'Hijo', type: 'familia', example: 'ä»–æœ‰ä¸€ä¸ªå„¿å­ã€‚', exampleTr: 'Ã‰l tiene un hijo.', audio: true, difficulty: 2 },
      { id: '4-4', hanzi: 'å¥³å„¿', pinyin: 'nÇš Ã©r', translation: 'Hija', type: 'familia', example: 'å¥¹çš„å¥³å„¿å¾ˆå¯çˆ±ã€‚', exampleTr: 'Su hija es muy linda.', audio: true, difficulty: 2 },
      { id: '4-5', hanzi: 'å®¶', pinyin: 'jiÄ', translation: 'Casa / Familia', type: 'familia', example: 'æˆ‘çš„å®¶åœ¨åŒ—äº¬ã€‚', exampleTr: 'Mi casa estÃ¡ en PekÃ­n.', audio: true, difficulty: 1 },
      { id: '4-6', hanzi: 'æœ‹å‹', pinyin: 'pÃ©ng you', translation: 'Amigo', type: 'relaciÃ³n', example: 'ä»–æ˜¯æˆ‘çš„å¥½æœ‹å‹ã€‚', exampleTr: 'Ã‰l es mi buen amigo.', audio: true, difficulty: 1 },
      { id: '4-7', hanzi: 'åŒå­¦', pinyin: 'tÃ³ng xuÃ©', translation: 'CompaÃ±ero de clase', type: 'relaciÃ³n', example: 'å¥¹æ˜¯æˆ‘çš„åŒå­¦ã€‚', exampleTr: 'Ella es mi compaÃ±era.', audio: true, difficulty: 2 },
      { id: '4-8', hanzi: 'è€å¸ˆ', pinyin: 'lÇŽo shÄ«', translation: 'Profesor/a', type: 'relaciÃ³n', example: 'çŽ‹è€å¸ˆå¾ˆå¥½ã€‚', exampleTr: 'El profesor Wang es muy bueno.', audio: true, difficulty: 1 },
      { id: '4-9', hanzi: 'å­¦ç”Ÿ', pinyin: 'xuÃ© sheng', translation: 'Estudiante', type: 'relaciÃ³n', example: 'æˆ‘æ˜¯å­¦ç”Ÿã€‚', exampleTr: 'Soy estudiante.', audio: true, difficulty: 1 },
      { id: '4-10', hanzi: 'å…ˆç”Ÿ', pinyin: 'xiÄn sheng', translation: 'SeÃ±or / Esposo', type: 'relaciÃ³n', example: 'çŽ‹å…ˆç”Ÿå¥½ï¼', exampleTr: 'Â¡Hola, seÃ±or Wang!', audio: true, difficulty: 2 },
      { id: '4-11', hanzi: 'å°å§', pinyin: 'xiÇŽo jiÄ›', translation: 'SeÃ±orita', type: 'relaciÃ³n', example: 'æŽå°å§ï¼Œæ‚¨å¥½ï¼', exampleTr: 'Â¡Hola, seÃ±orita Li!', audio: true, difficulty: 2 },
    ]
  },
  {
    id: 5,
    title: "Verbos Esenciales",
    subtitle: "åŸºæœ¬åŠ¨è¯",
    description: "Las acciones mÃ¡s usadas en conversaciones diarias.",
    icon: "ðŸƒ",
    color: "from-amber-500 to-orange-600",
    bgPattern: "amber",
    grammar: [
      { title: "Sin conjugaciÃ³n", content: "Los verbos chinos NO se conjugan. æˆ‘åƒ (yo como), ä»–åƒ (Ã©l come), æˆ‘ä»¬åƒ (nosotros comemos)." },
      { title: "NegaciÃ³n", content: "Usa ä¸ (bÃ¹) antes del verbo para negar: æˆ‘ä¸åƒ (no como). ExcepciÃ³n: æ²¡ (mÃ©i) para æœ‰." }
    ],
    content: [
      { id: '5-1', hanzi: 'æ˜¯', pinyin: 'shÃ¬', translation: 'Ser / Estar', type: 'verbo', example: 'æˆ‘æ˜¯ä¸­å›½äººã€‚', exampleTr: 'Soy chino.', audio: true, difficulty: 1 },
      { id: '5-2', hanzi: 'æœ‰', pinyin: 'yÇ’u', translation: 'Tener / Haber', type: 'verbo', example: 'æˆ‘æœ‰ä¸€æœ¬ä¹¦ã€‚', exampleTr: 'Tengo un libro.', audio: true, difficulty: 1 },
      { id: '5-3', hanzi: 'åƒ', pinyin: 'chÄ«', translation: 'Comer', type: 'verbo', example: 'æˆ‘æƒ³åƒç±³é¥­ã€‚', exampleTr: 'Quiero comer arroz.', audio: true, difficulty: 1 },
      { id: '5-4', hanzi: 'å–', pinyin: 'hÄ“', translation: 'Beber', type: 'verbo', example: 'ä½ å–èŒ¶å—ï¼Ÿ', exampleTr: 'Â¿Bebes tÃ©?', audio: true, difficulty: 1 },
      { id: '5-5', hanzi: 'çœ‹', pinyin: 'kÃ n', translation: 'Mirar / Leer', type: 'verbo', example: 'æˆ‘åœ¨çœ‹ä¹¦ã€‚', exampleTr: 'Estoy leyendo.', audio: true, difficulty: 1 },
      { id: '5-6', hanzi: 'å¬', pinyin: 'tÄ«ng', translation: 'Escuchar', type: 'verbo', example: 'å¬éŸ³ä¹ã€‚', exampleTr: 'Escuchar mÃºsica.', audio: true, difficulty: 1 },
      { id: '5-7', hanzi: 'è¯´', pinyin: 'shuÅ', translation: 'Hablar / Decir', type: 'verbo', example: 'ä»–ä¼šè¯´ä¸­æ–‡ã€‚', exampleTr: 'Ã‰l puede hablar chino.', audio: true, difficulty: 1 },
      { id: '5-8', hanzi: 'è¯»', pinyin: 'dÃº', translation: 'Leer (en voz alta)', type: 'verbo', example: 'è¯·è¯»è¿™ä¸ªå­—ã€‚', exampleTr: 'Por favor lee este carÃ¡cter.', audio: true, difficulty: 2 },
      { id: '5-9', hanzi: 'å†™', pinyin: 'xiÄ›', translation: 'Escribir', type: 'verbo', example: 'æˆ‘åœ¨å†™æ±‰å­—ã€‚', exampleTr: 'Estoy escribiendo caracteres.', audio: true, difficulty: 2 },
      { id: '5-10', hanzi: 'åŽ»', pinyin: 'qÃ¹', translation: 'Ir', type: 'verbo', example: 'æˆ‘åŽ»å­¦æ ¡ã€‚', exampleTr: 'Voy a la escuela.', audio: true, difficulty: 1 },
      { id: '5-11', hanzi: 'æ¥', pinyin: 'lÃ¡i', translation: 'Venir', type: 'verbo', example: 'ä»–æ¥ä¸­å›½ã€‚', exampleTr: 'Ã‰l viene a China.', audio: true, difficulty: 1 },
      { id: '5-12', hanzi: 'å›ž', pinyin: 'huÃ­', translation: 'Regresar / Volver', type: 'verbo', example: 'æˆ‘å›žå®¶ã€‚', exampleTr: 'Vuelvo a casa.', audio: true, difficulty: 2 },
    ]
  },
  {
    id: 6,
    title: "Verbos de AcciÃ³n II",
    subtitle: "åŠ¨ä½œåŠ¨è¯ II",
    description: "MÃ¡s acciones para expresar actividades diarias.",
    icon: "âš¡",
    color: "from-cyan-500 to-blue-600",
    bgPattern: "cyan",
    grammar: [
      { title: "æƒ³ (xiÇŽng) = querer/pensar", content: "æƒ³ + verbo = querer hacer algo. æˆ‘æƒ³åƒ (quiero comer)." },
      { title: "ä¼š (huÃ¬) = saber/poder", content: "ä¼š indica habilidad aprendida: æˆ‘ä¼šè¯´ä¸­æ–‡ (sÃ© hablar chino)." }
    ],
    content: [
      { id: '6-1', hanzi: 'æƒ³', pinyin: 'xiÇŽng', translation: 'Querer / Pensar / ExtraÃ±ar', type: 'verbo', example: 'æˆ‘æƒ³ä½ ã€‚', exampleTr: 'Te extraÃ±o.', audio: true, difficulty: 1 },
      { id: '6-2', hanzi: 'å–œæ¬¢', pinyin: 'xÇ huan', translation: 'Gustar', type: 'verbo', example: 'æˆ‘å–œæ¬¢ä¸­å›½èœã€‚', exampleTr: 'Me gusta la comida china.', audio: true, difficulty: 1 },
      { id: '6-3', hanzi: 'çˆ±', pinyin: 'Ã i', translation: 'Amar', type: 'verbo', example: 'æˆ‘çˆ±ä½ ã€‚', exampleTr: 'Te amo.', audio: true, difficulty: 1 },
      { id: '6-4', hanzi: 'ä¼š', pinyin: 'huÃ¬', translation: 'Saber (hacer) / Poder', type: 'verbo', example: 'ä½ ä¼šæ¸¸æ³³å—ï¼Ÿ', exampleTr: 'Â¿Sabes nadar?', audio: true, difficulty: 2 },
      { id: '6-5', hanzi: 'èƒ½', pinyin: 'nÃ©ng', translation: 'Poder (capacidad)', type: 'verbo', example: 'æˆ‘èƒ½å¸®ä½ ã€‚', exampleTr: 'Puedo ayudarte.', audio: true, difficulty: 2 },
      { id: '6-6', hanzi: 'åš', pinyin: 'zuÃ²', translation: 'Hacer', type: 'verbo', example: 'ä½ åœ¨åšä»€ä¹ˆï¼Ÿ', exampleTr: 'Â¿QuÃ© estÃ¡s haciendo?', audio: true, difficulty: 1 },
      { id: '6-7', hanzi: 'å·¥ä½œ', pinyin: 'gÅng zuÃ²', translation: 'Trabajar / Trabajo', type: 'verbo', example: 'æˆ‘åœ¨å·¥ä½œã€‚', exampleTr: 'Estoy trabajando.', audio: true, difficulty: 2 },
      { id: '6-8', hanzi: 'å­¦ä¹ ', pinyin: 'xuÃ© xÃ­', translation: 'Estudiar / Aprender', type: 'verbo', example: 'æˆ‘å­¦ä¹ ä¸­æ–‡ã€‚', exampleTr: 'Estudio chino.', audio: true, difficulty: 1 },
      { id: '6-9', hanzi: 'ç¡è§‰', pinyin: 'shuÃ¬ jiÃ o', translation: 'Dormir', type: 'verbo', example: 'æˆ‘æƒ³ç¡è§‰ã€‚', exampleTr: 'Quiero dormir.', audio: true, difficulty: 2 },
      { id: '6-10', hanzi: 'ä½', pinyin: 'zhÃ¹', translation: 'Vivir / Habitar', type: 'verbo', example: 'ä½ ä½åœ¨å“ªå„¿ï¼Ÿ', exampleTr: 'Â¿DÃ³nde vives?', audio: true, difficulty: 2 },
      { id: '6-11', hanzi: 'å«', pinyin: 'jiÃ o', translation: 'Llamarse / Llamar', type: 'verbo', example: 'æˆ‘å«Emilianoã€‚', exampleTr: 'Me llamo Emiliano.', audio: true, difficulty: 1 },
      { id: '6-12', hanzi: 'è®¤è¯†', pinyin: 'rÃ¨n shi', translation: 'Conocer', type: 'verbo', example: 'è®¤è¯†ä½ å¾ˆé«˜å…´ã€‚', exampleTr: 'Encantado de conocerte.', audio: true, difficulty: 2 },
    ]
  },
  {
    id: 7,
    title: "Tiempo y Fechas",
    subtitle: "æ—¶é—´ä¸Žæ—¥æœŸ",
    description: "Domina las expresiones temporales bÃ¡sicas.",
    icon: "ðŸ“…",
    color: "from-teal-500 to-emerald-600",
    bgPattern: "teal",
    grammar: [
      { title: "Orden temporal", content: "El tiempo va ANTES del verbo: æˆ‘ä»Šå¤©åŽ» (Yo hoy voy)." },
      { title: "æ˜ŸæœŸ (xÄ«ng qÄ«)", content: "Para dÃ­as: æ˜ŸæœŸä¸€ (lunes), æ˜ŸæœŸäºŒ (martes)... æ˜ŸæœŸæ—¥/å¤© (domingo)." }
    ],
    content: [
      { id: '7-1', hanzi: 'ä»Šå¤©', pinyin: 'jÄ«n tiÄn', translation: 'Hoy', type: 'tiempo', example: 'ä»Šå¤©æ˜ŸæœŸå‡ ï¼Ÿ', exampleTr: 'Â¿QuÃ© dÃ­a es hoy?', audio: true, difficulty: 1 },
      { id: '7-2', hanzi: 'æ˜Žå¤©', pinyin: 'mÃ­ng tiÄn', translation: 'MaÃ±ana', type: 'tiempo', example: 'æ˜Žå¤©è§ï¼', exampleTr: 'Â¡Hasta maÃ±ana!', audio: true, difficulty: 1 },
      { id: '7-3', hanzi: 'æ˜¨å¤©', pinyin: 'zuÃ³ tiÄn', translation: 'Ayer', type: 'tiempo', example: 'æ˜¨å¤©å¾ˆå†·ã€‚', exampleTr: 'Ayer hizo frÃ­o.', audio: true, difficulty: 1 },
      { id: '7-4', hanzi: 'çŽ°åœ¨', pinyin: 'xiÃ n zÃ i', translation: 'Ahora', type: 'tiempo', example: 'çŽ°åœ¨å‡ ç‚¹ï¼Ÿ', exampleTr: 'Â¿QuÃ© hora es ahora?', audio: true, difficulty: 1 },
      { id: '7-5', hanzi: 'æ—¶å€™', pinyin: 'shÃ­ hou', translation: 'Momento / Cuando', type: 'tiempo', example: 'ä»€ä¹ˆæ—¶å€™ï¼Ÿ', exampleTr: 'Â¿CuÃ¡ndo?', audio: true, difficulty: 2 },
      { id: '7-6', hanzi: 'å¹´', pinyin: 'niÃ¡n', translation: 'AÃ±o', type: 'tiempo', example: 'ä»Šå¹´æ˜¯2024å¹´ã€‚', exampleTr: 'Este aÃ±o es 2024.', audio: true, difficulty: 1 },
      { id: '7-7', hanzi: 'æœˆ', pinyin: 'yuÃ¨', translation: 'Mes / Luna', type: 'tiempo', example: 'è¿™ä¸ªæœˆã€‚', exampleTr: 'Este mes.', audio: true, difficulty: 1 },
      { id: '7-8', hanzi: 'æ—¥', pinyin: 'rÃ¬', translation: 'DÃ­a / Sol', type: 'tiempo', example: 'ä¸‰æœˆåäº”æ—¥ã€‚', exampleTr: '15 de marzo.', audio: true, difficulty: 1 },
      { id: '7-9', hanzi: 'å·', pinyin: 'hÃ o', translation: 'DÃ­a (coloquial) / NÃºmero', type: 'tiempo', example: 'ä»Šå¤©å‡ å·ï¼Ÿ', exampleTr: 'Â¿QuÃ© fecha es hoy?', audio: true, difficulty: 2 },
      { id: '7-10', hanzi: 'æ˜ŸæœŸ', pinyin: 'xÄ«ng qÄ«', translation: 'Semana', type: 'tiempo', example: 'è¿™ä¸ªæ˜ŸæœŸã€‚', exampleTr: 'Esta semana.', audio: true, difficulty: 2 },
      { id: '7-11', hanzi: 'ç‚¹', pinyin: 'diÇŽn', translation: 'Hora (en punto)', type: 'tiempo', example: 'çŽ°åœ¨ä¸‰ç‚¹ã€‚', exampleTr: 'Ahora son las 3.', audio: true, difficulty: 1 },
      { id: '7-12', hanzi: 'åˆ†é’Ÿ', pinyin: 'fÄ“n zhÅng', translation: 'Minuto', type: 'tiempo', example: 'ååˆ†é’Ÿã€‚', exampleTr: 'Diez minutos.', audio: true, difficulty: 2 },
    ]
  },
  {
    id: 8,
    title: "Adjetivos Comunes",
    subtitle: "å¸¸ç”¨å½¢å®¹è¯",
    description: "Describe personas, objetos y situaciones.",
    icon: "ðŸŽ¨",
    color: "from-fuchsia-500 to-pink-600",
    bgPattern: "fuchsia",
    grammar: [
      { title: "å¾ˆ (hÄ›n) = muy", content: "Casi siempre usamos å¾ˆ antes de adjetivos: ä»–å¾ˆé«˜ (Ã©l es alto). Sin å¾ˆ suena comparativo." },
      { title: "Adjetivos como verbos", content: "Los adjetivos funcionan como verbos: æˆ‘é«˜ (soy alto), no necesitas æ˜¯." }
    ],
    content: [
      { id: '8-1', hanzi: 'å¤§', pinyin: 'dÃ ', translation: 'Grande', type: 'adjetivo', example: 'è¿™ä¸ªå¾ˆå¤§ã€‚', exampleTr: 'Esto es muy grande.', audio: true, difficulty: 1 },
      { id: '8-2', hanzi: 'å°', pinyin: 'xiÇŽo', translation: 'PequeÃ±o', type: 'adjetivo', example: 'æˆ‘çš„æˆ¿é—´å¾ˆå°ã€‚', exampleTr: 'Mi habitaciÃ³n es pequeÃ±a.', audio: true, difficulty: 1 },
      { id: '8-3', hanzi: 'å¤š', pinyin: 'duÅ', translation: 'Mucho', type: 'adjetivo', example: 'äººå¾ˆå¤šã€‚', exampleTr: 'Hay mucha gente.', audio: true, difficulty: 1 },
      { id: '8-4', hanzi: 'å°‘', pinyin: 'shÇŽo', translation: 'Poco', type: 'adjetivo', example: 'é’±å¾ˆå°‘ã€‚', exampleTr: 'Hay poco dinero.', audio: true, difficulty: 1 },
      { id: '8-5', hanzi: 'å¥½', pinyin: 'hÇŽo', translation: 'Bueno / Bien', type: 'adjetivo', example: 'è¿™æœ¬ä¹¦å¾ˆå¥½ã€‚', exampleTr: 'Este libro es muy bueno.', audio: true, difficulty: 1 },
      { id: '8-6', hanzi: 'é«˜å…´', pinyin: 'gÄo xÃ¬ng', translation: 'Contento / Feliz', type: 'adjetivo', example: 'æˆ‘å¾ˆé«˜å…´ã€‚', exampleTr: 'Estoy muy contento.', audio: true, difficulty: 1 },
      { id: '8-7', hanzi: 'æ¼‚äº®', pinyin: 'piÃ o liang', translation: 'Bonito/a', type: 'adjetivo', example: 'å¥¹å¾ˆæ¼‚äº®ã€‚', exampleTr: 'Ella es muy bonita.', audio: true, difficulty: 2 },
      { id: '8-8', hanzi: 'å†·', pinyin: 'lÄ›ng', translation: 'FrÃ­o', type: 'adjetivo', example: 'ä»Šå¤©å¾ˆå†·ã€‚', exampleTr: 'Hoy hace frÃ­o.', audio: true, difficulty: 1 },
      { id: '8-9', hanzi: 'çƒ­', pinyin: 'rÃ¨', translation: 'Caliente / Calor', type: 'adjetivo', example: 'å¤©æ°”å¾ˆçƒ­ã€‚', exampleTr: 'El clima es caluroso.', audio: true, difficulty: 1 },
      { id: '8-10', hanzi: 'é«˜', pinyin: 'gÄo', translation: 'Alto', type: 'adjetivo', example: 'ä»–å¾ˆé«˜ã€‚', exampleTr: 'Ã‰l es muy alto.', audio: true, difficulty: 1 },
    ]
  },
  {
    id: 9,
    title: "Comida y Bebida",
    subtitle: "é£Ÿç‰©ä¸Žé¥®æ–™",
    description: "Vocabulario para sobrevivir en restaurantes.",
    icon: "ðŸœ",
    color: "from-red-500 to-rose-600",
    bgPattern: "red",
    grammar: [
      { title: "Pedir comida", content: "æˆ‘è¦... (wÇ’ yÃ o...) = Quiero... Es la forma mÃ¡s comÃºn de ordenar." },
      { title: "Clasificadores", content: "æ¯ (bÄ“i) para tazas/vasos, ä¸ª (gÃ¨) clasificador general." }
    ],
    content: [
      { id: '9-1', hanzi: 'æ°´', pinyin: 'shuÇ', translation: 'Agua', type: 'bebida', example: 'æˆ‘è¦ä¸€æ¯æ°´ã€‚', exampleTr: 'Quiero un vaso de agua.', audio: true, difficulty: 1 },
      { id: '9-2', hanzi: 'èŒ¶', pinyin: 'chÃ¡', translation: 'TÃ©', type: 'bebida', example: 'ä½ å–èŒ¶å—ï¼Ÿ', exampleTr: 'Â¿Bebes tÃ©?', audio: true, difficulty: 1 },
      { id: '9-3', hanzi: 'å’–å•¡', pinyin: 'kÄ fÄ“i', translation: 'CafÃ©', type: 'bebida', example: 'æˆ‘å–œæ¬¢å–å’–å•¡ã€‚', exampleTr: 'Me gusta beber cafÃ©.', audio: true, difficulty: 1 },
      { id: '9-4', hanzi: 'ç±³é¥­', pinyin: 'mÇ fÃ n', translation: 'Arroz (cocido)', type: 'comida', example: 'æˆ‘åƒç±³é¥­ã€‚', exampleTr: 'Como arroz.', audio: true, difficulty: 1 },
      { id: '9-5', hanzi: 'èœ', pinyin: 'cÃ i', translation: 'Plato / Verdura', type: 'comida', example: 'ä¸­å›½èœå¾ˆå¥½åƒã€‚', exampleTr: 'La comida china es deliciosa.', audio: true, difficulty: 1 },
      { id: '9-6', hanzi: 'æ°´æžœ', pinyin: 'shuÇ guÇ’', translation: 'Fruta', type: 'comida', example: 'æˆ‘å–œæ¬¢åƒæ°´æžœã€‚', exampleTr: 'Me gusta comer fruta.', audio: true, difficulty: 2 },
      { id: '9-7', hanzi: 'è‹¹æžœ', pinyin: 'pÃ­ng guÇ’', translation: 'Manzana', type: 'comida', example: 'è¿™ä¸ªè‹¹æžœå¾ˆå¥½åƒã€‚', exampleTr: 'Esta manzana es deliciosa.', audio: true, difficulty: 2 },
      { id: '9-8', hanzi: 'æ¯å­', pinyin: 'bÄ“i zi', translation: 'Vaso / Taza', type: 'objeto', example: 'è¿™æ˜¯æˆ‘çš„æ¯å­ã€‚', exampleTr: 'Este es mi vaso.', audio: true, difficulty: 2 },
      { id: '9-9', hanzi: 'é¥­åº—', pinyin: 'fÃ n diÃ n', translation: 'Restaurante / Hotel', type: 'lugar', example: 'æˆ‘ä»¬åŽ»é¥­åº—ã€‚', exampleTr: 'Vamos al restaurante.', audio: true, difficulty: 2 },
      { id: '9-10', hanzi: 'å•†åº—', pinyin: 'shÄng diÃ n', translation: 'Tienda', type: 'lugar', example: 'å•†åº—åœ¨å“ªå„¿ï¼Ÿ', exampleTr: 'Â¿DÃ³nde estÃ¡ la tienda?', audio: true, difficulty: 2 },
    ]
  },
  {
    id: 10,
    title: "Lugares y Direcciones",
    subtitle: "åœ°ç‚¹ä¸Žæ–¹ä½",
    description: "Navega y ubÃ­cate en cualquier entorno.",
    icon: "ðŸ—ºï¸",
    color: "from-sky-500 to-blue-600",
    bgPattern: "sky",
    grammar: [
      { title: "åœ¨ (zÃ i) = en/estar", content: "Indica ubicaciÃ³n: æˆ‘åœ¨å®¶ (Estoy en casa), ä¹¦åœ¨æ¡Œå­ä¸Š (El libro estÃ¡ en la mesa)." },
      { title: "Preguntar ubicaciÃ³n", content: "...åœ¨å“ªå„¿ï¼Ÿ (...zÃ i nÇŽr?) = Â¿DÃ³nde estÃ¡...?" }
    ],
    content: [
      { id: '10-1', hanzi: 'ä¸­å›½', pinyin: 'ZhÅng guÃ³', translation: 'China', type: 'lugar', example: 'æˆ‘åœ¨ä¸­å›½ã€‚', exampleTr: 'Estoy en China.', audio: true, difficulty: 1 },
      { id: '10-2', hanzi: 'åŒ—äº¬', pinyin: 'BÄ›i jÄ«ng', translation: 'PekÃ­n', type: 'lugar', example: 'åŒ—äº¬æ˜¯ä¸­å›½çš„é¦–éƒ½ã€‚', exampleTr: 'PekÃ­n es la capital de China.', audio: true, difficulty: 2 },
      { id: '10-3', hanzi: 'å­¦æ ¡', pinyin: 'xuÃ© xiÃ o', translation: 'Escuela', type: 'lugar', example: 'æˆ‘åŽ»å­¦æ ¡ã€‚', exampleTr: 'Voy a la escuela.', audio: true, difficulty: 1 },
      { id: '10-4', hanzi: 'åŒ»é™¢', pinyin: 'yÄ« yuÃ n', translation: 'Hospital', type: 'lugar', example: 'åŒ»é™¢åœ¨å“ªå„¿ï¼Ÿ', exampleTr: 'Â¿DÃ³nde estÃ¡ el hospital?', audio: true, difficulty: 2 },
      { id: '10-5', hanzi: 'åœ¨', pinyin: 'zÃ i', translation: 'En / Estar (ubicaciÃ³n)', type: 'preposiciÃ³n', example: 'ä»–åœ¨å®¶ã€‚', exampleTr: 'Ã‰l estÃ¡ en casa.', audio: true, difficulty: 1 },
      { id: '10-6', hanzi: 'é‡Œ', pinyin: 'lÇ', translation: 'Dentro', type: 'posiciÃ³n', example: 'ä¹¦åœ¨ä¹¦åŒ…é‡Œã€‚', exampleTr: 'El libro estÃ¡ dentro de la mochila.', audio: true, difficulty: 2 },
      { id: '10-7', hanzi: 'ä¸Š', pinyin: 'shÃ ng', translation: 'Arriba / Encima', type: 'posiciÃ³n', example: 'çŒ«åœ¨æ¡Œå­ä¸Šã€‚', exampleTr: 'El gato estÃ¡ en la mesa.', audio: true, difficulty: 1 },
      { id: '10-8', hanzi: 'ä¸‹', pinyin: 'xiÃ ', translation: 'Abajo / Debajo', type: 'posiciÃ³n', example: 'ç‹—åœ¨åºŠä¸‹ã€‚', exampleTr: 'El perro estÃ¡ debajo de la cama.', audio: true, difficulty: 1 },
      { id: '10-9', hanzi: 'å‰é¢', pinyin: 'qiÃ¡n miÃ n', translation: 'Delante / Enfrente', type: 'posiciÃ³n', example: 'å­¦æ ¡åœ¨å‰é¢ã€‚', exampleTr: 'La escuela estÃ¡ adelante.', audio: true, difficulty: 2 },
      { id: '10-10', hanzi: 'åŽé¢', pinyin: 'hÃ²u miÃ n', translation: 'DetrÃ¡s', type: 'posiciÃ³n', example: 'ä»–åœ¨æˆ‘åŽé¢ã€‚', exampleTr: 'Ã‰l estÃ¡ detrÃ¡s de mÃ­.', audio: true, difficulty: 2 },
      { id: '10-11', hanzi: 'å“ªå„¿', pinyin: 'nÇŽr', translation: 'Â¿DÃ³nde?', type: 'interrogativo', example: 'ä½ åŽ»å“ªå„¿ï¼Ÿ', exampleTr: 'Â¿A dÃ³nde vas?', audio: true, difficulty: 1 },
      { id: '10-12', hanzi: 'è¿™å„¿', pinyin: 'zhÃ¨r', translation: 'AquÃ­', type: 'lugar', example: 'æˆ‘åœ¨è¿™å„¿ã€‚', exampleTr: 'Estoy aquÃ­.', audio: true, difficulty: 1 },
    ]
  },
  {
    id: 11,
    title: "Preguntas Esenciales",
    subtitle: "åŸºæœ¬é—®å¥",
    description: "Las palabras clave para hacer preguntas.",
    icon: "â“",
    color: "from-orange-500 to-amber-600",
    bgPattern: "orange",
    grammar: [
      { title: "PartÃ­cula å— (ma)", content: "Agrega å— al final de una afirmaciÃ³n para convertirla en pregunta sÃ­/no: ä½ å¥½å—ï¼Ÿ" },
      { title: "Preguntas con ä»€ä¹ˆ/è°/å“ª", content: "La palabra interrogativa va donde irÃ­a la respuesta: ä½ å«ä»€ä¹ˆï¼Ÿ(Â¿CÃ³mo te llamas?)" }
    ],
    content: [
      { id: '11-1', hanzi: 'ä»€ä¹ˆ', pinyin: 'shÃ©n me', translation: 'Â¿QuÃ©?', type: 'interrogativo', example: 'è¿™æ˜¯ä»€ä¹ˆï¼Ÿ', exampleTr: 'Â¿QuÃ© es esto?', audio: true, difficulty: 1 },
      { id: '11-2', hanzi: 'è°', pinyin: 'shÃ©i', translation: 'Â¿QuiÃ©n?', type: 'interrogativo', example: 'ä»–æ˜¯è°ï¼Ÿ', exampleTr: 'Â¿QuiÃ©n es Ã©l?', audio: true, difficulty: 1 },
      { id: '11-3', hanzi: 'æ€Žä¹ˆ', pinyin: 'zÄ›n me', translation: 'Â¿CÃ³mo?', type: 'interrogativo', example: 'ä½ æ€Žä¹ˆåŽ»ï¼Ÿ', exampleTr: 'Â¿CÃ³mo vas?', audio: true, difficulty: 2 },
      { id: '11-4', hanzi: 'æ€Žä¹ˆæ ·', pinyin: 'zÄ›n me yÃ ng', translation: 'Â¿QuÃ© tal? / Â¿CÃ³mo es?', type: 'interrogativo', example: 'å¤©æ°”æ€Žä¹ˆæ ·ï¼Ÿ', exampleTr: 'Â¿CÃ³mo estÃ¡ el clima?', audio: true, difficulty: 2 },
      { id: '11-5', hanzi: 'ä¸ºä»€ä¹ˆ', pinyin: 'wÃ¨i shÃ©n me', translation: 'Â¿Por quÃ©?', type: 'interrogativo', example: 'ä¸ºä»€ä¹ˆä¸åŽ»ï¼Ÿ', exampleTr: 'Â¿Por quÃ© no vas?', audio: true, difficulty: 2 },
      { id: '11-6', hanzi: 'å‡ ', pinyin: 'jÇ', translation: 'Â¿CuÃ¡ntos? (1-10)', type: 'interrogativo', example: 'ä½ å‡ å²ï¼Ÿ', exampleTr: 'Â¿CuÃ¡ntos aÃ±os tienes?', audio: true, difficulty: 1 },
      { id: '11-7', hanzi: 'å¤šå°‘', pinyin: 'duÅ shao', translation: 'Â¿CuÃ¡nto/s?', type: 'interrogativo', example: 'è¿™ä¸ªå¤šå°‘é’±ï¼Ÿ', exampleTr: 'Â¿CuÃ¡nto cuesta esto?', audio: true, difficulty: 1 },
      { id: '11-8', hanzi: 'å—', pinyin: 'ma', translation: '(partÃ­cula de pregunta)', type: 'partÃ­cula', example: 'ä½ å¥½å—ï¼Ÿ', exampleTr: 'Â¿CÃ³mo estÃ¡s?', audio: true, difficulty: 1 },
      { id: '11-9', hanzi: 'å‘¢', pinyin: 'ne', translation: 'Â¿Y tÃº/Ã©l...?', type: 'partÃ­cula', example: 'æˆ‘å¾ˆå¥½ï¼Œä½ å‘¢ï¼Ÿ', exampleTr: 'Estoy bien, Â¿y tÃº?', audio: true, difficulty: 2 },
    ]
  },
  {
    id: 12,
    title: "Objetos Cotidianos",
    subtitle: "æ—¥å¸¸ç‰©å“",
    description: "Nombra los objetos que te rodean.",
    icon: "ðŸ“š",
    color: "from-lime-500 to-green-600",
    bgPattern: "lime",
    grammar: [
      { title: "Clasificador ä¸ª (gÃ¨)", content: "Clasificador general: ä¸€ä¸ªäºº (una persona), ä¸¤ä¸ªè‹¹æžœ (dos manzanas)." },
      { title: "Clasificador æœ¬ (bÄ›n)", content: "Para libros: ä¸€æœ¬ä¹¦ (un libro), ä¸‰æœ¬æ‚å¿— (tres revistas)." }
    ],
    content: [
      { id: '12-1', hanzi: 'ä¹¦', pinyin: 'shÅ«', translation: 'Libro', type: 'objeto', example: 'æˆ‘åœ¨çœ‹ä¹¦ã€‚', exampleTr: 'Estoy leyendo un libro.', audio: true, difficulty: 1 },
      { id: '12-2', hanzi: 'æœ¬', pinyin: 'bÄ›n', translation: 'Clasificador (libros)', type: 'clasificador', example: 'ä¸€æœ¬ä¹¦ã€‚', exampleTr: 'Un libro.', audio: true, difficulty: 2 },
      { id: '12-3', hanzi: 'ä¸ª', pinyin: 'gÃ¨', translation: 'Clasificador (general)', type: 'clasificador', example: 'ä¸€ä¸ªäººã€‚', exampleTr: 'Una persona.', audio: true, difficulty: 1 },
      { id: '12-4', hanzi: 'äº›', pinyin: 'xiÄ“', translation: 'Algunos / Unos', type: 'clasificador', example: 'ä¸€äº›æ°´æžœã€‚', exampleTr: 'Algunas frutas.', audio: true, difficulty: 2 },
      { id: '12-5', hanzi: 'ç”µè„‘', pinyin: 'diÃ n nÇŽo', translation: 'Computadora', type: 'objeto', example: 'æˆ‘çš„ç”µè„‘å¾ˆæ–°ã€‚', exampleTr: 'Mi computadora es nueva.', audio: true, difficulty: 2 },
      { id: '12-6', hanzi: 'ç”µè§†', pinyin: 'diÃ n shÃ¬', translation: 'TelevisiÃ³n', type: 'objeto', example: 'æˆ‘åœ¨çœ‹ç”µè§†ã€‚', exampleTr: 'Estoy viendo televisiÃ³n.', audio: true, difficulty: 2 },
      { id: '12-7', hanzi: 'ç”µå½±', pinyin: 'diÃ n yÇng', translation: 'PelÃ­cula', type: 'objeto', example: 'æˆ‘ä»¬çœ‹ç”µå½±å§ã€‚', exampleTr: 'Veamos una pelÃ­cula.', audio: true, difficulty: 2 },
      { id: '12-8', hanzi: 'é’±', pinyin: 'qiÃ¡n', translation: 'Dinero', type: 'objeto', example: 'æˆ‘æ²¡æœ‰é’±ã€‚', exampleTr: 'No tengo dinero.', audio: true, difficulty: 1 },
      { id: '12-9', hanzi: 'å—', pinyin: 'kuÃ i', translation: 'Yuan (coloquial)', type: 'clasificador', example: 'åå—é’±ã€‚', exampleTr: 'Diez yuanes.', audio: true, difficulty: 2 },
      { id: '12-10', hanzi: 'ä¸œè¥¿', pinyin: 'dÅng xi', translation: 'Cosa / Objeto', type: 'objeto', example: 'è¿™æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Ÿ', exampleTr: 'Â¿QuÃ© cosa es esta?', audio: true, difficulty: 2 },
      { id: '12-11', hanzi: 'è¡£æœ', pinyin: 'yÄ« fu', translation: 'Ropa', type: 'objeto', example: 'æˆ‘ä¹°è¡£æœã€‚', exampleTr: 'Compro ropa.', audio: true, difficulty: 2 },
      { id: '12-12', hanzi: 'åå­—', pinyin: 'mÃ­ng zi', translation: 'Nombre', type: 'objeto', example: 'ä½ å«ä»€ä¹ˆåå­—ï¼Ÿ', exampleTr: 'Â¿CÃ³mo te llamas?', audio: true, difficulty: 1 },
    ]
  },
  {
    id: 13,
    title: "Partes del Cuerpo y Salud",
    subtitle: "èº«ä½“ä¸Žå¥åº·",
    description: "Vocabulario bÃ¡sico sobre el cuerpo.",
    icon: "ðŸ¥",
    color: "from-pink-500 to-rose-600",
    bgPattern: "pink",
    grammar: [
      { title: "Expresar malestar", content: "æˆ‘ + parte del cuerpo + ç–¼/ä¸èˆ’æœ: æˆ‘å¤´ç–¼ (Me duele la cabeza)." }
    ],
    content: [
      { id: '13-1', hanzi: 'äºº', pinyin: 'rÃ©n', translation: 'Persona', type: 'sustantivo', example: 'é‚£ä¸ªäººæ˜¯è°ï¼Ÿ', exampleTr: 'Â¿QuiÃ©n es esa persona?', audio: true, difficulty: 1 },
      { id: '13-2', hanzi: 'åŒ»ç”Ÿ', pinyin: 'yÄ« shÄ“ng', translation: 'MÃ©dico / Doctor', type: 'profesiÃ³n', example: 'å¥¹æ˜¯åŒ»ç”Ÿã€‚', exampleTr: 'Ella es mÃ©dica.', audio: true, difficulty: 2 },
      { id: '13-3', hanzi: 'å²', pinyin: 'suÃ¬', translation: 'AÃ±os (edad)', type: 'clasificador', example: 'æˆ‘äºŒåå²ã€‚', exampleTr: 'Tengo 20 aÃ±os.', audio: true, difficulty: 1 },
      { id: '13-4', hanzi: 'èº«ä½“', pinyin: 'shÄ“n tÇ', translation: 'Cuerpo', type: 'sustantivo', example: 'èº«ä½“å¥½å—ï¼Ÿ', exampleTr: 'Â¿CÃ³mo estÃ¡ tu salud?', audio: true, difficulty: 2 },
    ]
  },
  {
    id: 14,
    title: "Transporte y Movimiento",
    subtitle: "äº¤é€šä¸Žå‡ºè¡Œ",
    description: "CÃ³mo moverse y llegar a lugares.",
    icon: "ðŸš—",
    color: "from-indigo-500 to-violet-600",
    bgPattern: "indigo",
    grammar: [
      { title: "å (zuÃ²) = sentarse/tomar", content: "å + transporte = tomar: åé£žæœº (tomar aviÃ³n), åå‡ºç§Ÿè½¦ (tomar taxi)." },
      { title: "å¼€ (kÄi) = conducir/abrir", content: "å¼€è½¦ (conducir), å¼€é—¨ (abrir la puerta)." }
    ],
    content: [
      { id: '14-1', hanzi: 'å', pinyin: 'zuÃ²', translation: 'Sentarse / Tomar (transporte)', type: 'verbo', example: 'è¯·åï¼', exampleTr: 'Â¡Por favor siÃ©ntate!', audio: true, difficulty: 1 },
      { id: '14-2', hanzi: 'é£žæœº', pinyin: 'fÄ“i jÄ«', translation: 'AviÃ³n', type: 'transporte', example: 'æˆ‘åé£žæœºåŽ»ã€‚', exampleTr: 'Voy en aviÃ³n.', audio: true, difficulty: 2 },
      { id: '14-3', hanzi: 'å‡ºç§Ÿè½¦', pinyin: 'chÅ« zÅ« chÄ“', translation: 'Taxi', type: 'transporte', example: 'æˆ‘ä»¬åå‡ºç§Ÿè½¦å§ã€‚', exampleTr: 'Tomemos un taxi.', audio: true, difficulty: 2 },
      { id: '14-4', hanzi: 'å¼€', pinyin: 'kÄi', translation: 'Abrir / Conducir', type: 'verbo', example: 'ä»–ä¼šå¼€è½¦ã€‚', exampleTr: 'Ã‰l sabe conducir.', audio: true, difficulty: 2 },
      { id: '14-5', hanzi: 'è½¦ç«™', pinyin: 'chÄ“ zhÃ n', translation: 'EstaciÃ³n', type: 'lugar', example: 'è½¦ç«™åœ¨å“ªå„¿ï¼Ÿ', exampleTr: 'Â¿DÃ³nde estÃ¡ la estaciÃ³n?', audio: true, difficulty: 2 },
    ]
  },
  {
    id: 15,
    title: "Clima y Naturaleza",
    subtitle: "å¤©æ°”ä¸Žè‡ªç„¶",
    description: "Habla sobre el tiempo y el entorno.",
    icon: "ðŸŒ¤ï¸",
    color: "from-yellow-500 to-orange-500",
    bgPattern: "yellow",
    grammar: [
      { title: "Hablar del clima", content: "å¤©æ°” + adjetivo: å¤©æ°”å¾ˆå¥½ (El clima es bueno), å¤©æ°”å¾ˆå†· (Hace frÃ­o)." },
      { title: "ä¸‹é›¨ (xiÃ  yÇ”)", content: "ä¸‹ = caer, é›¨ = lluvia. ä¸‹é›¨äº† (EstÃ¡ lloviendo)." }
    ],
    content: [
      { id: '15-1', hanzi: 'å¤©æ°”', pinyin: 'tiÄn qÃ¬', translation: 'Clima / Tiempo', type: 'sustantivo', example: 'ä»Šå¤©å¤©æ°”å¾ˆå¥½ã€‚', exampleTr: 'Hoy el clima es muy bueno.', audio: true, difficulty: 2 },
      { id: '15-2', hanzi: 'ä¸‹é›¨', pinyin: 'xiÃ  yÇ”', translation: 'Llover', type: 'verbo', example: 'æ˜Žå¤©ä¸‹é›¨å—ï¼Ÿ', exampleTr: 'Â¿LloverÃ¡ maÃ±ana?', audio: true, difficulty: 2 },
      { id: '15-3', hanzi: 'å¤ªé˜³', pinyin: 'tÃ i yÃ¡ng', translation: 'Sol', type: 'sustantivo', example: 'å¤ªé˜³å¾ˆå¤§ã€‚', exampleTr: 'El sol es muy fuerte.', audio: true, difficulty: 2 },
    ]
  },
  {
    id: 16,
    title: "PartÃ­culas y Conectores",
    subtitle: "åŠ©è¯ä¸Žè¿žè¯",
    description: "Las palabras que dan fluidez al idioma.",
    icon: "ðŸ”—",
    color: "from-slate-500 to-gray-600",
    bgPattern: "slate",
    grammar: [
      { title: "çš„ (de) posesivo/descriptivo", content: "æˆ‘çš„ä¹¦ (mi libro), æ¼‚äº®çš„å¥³å­© (chica bonita)." },
      { title: "äº† (le) cambio/pasado", content: "Indica cambio de estado o acciÃ³n completada: æˆ‘åƒäº† (comÃ­), ä¸‹é›¨äº† (empezÃ³ a llover)." }
    ],
    content: [
      { id: '16-1', hanzi: 'çš„', pinyin: 'de', translation: 'De (posesivo/descriptivo)', type: 'partÃ­cula', example: 'æˆ‘çš„ä¹¦ã€‚', exampleTr: 'Mi libro.', audio: true, difficulty: 1 },
      { id: '16-2', hanzi: 'äº†', pinyin: 'le', translation: '(cambio de estado/pasado)', type: 'partÃ­cula', example: 'æˆ‘åƒäº†ã€‚', exampleTr: 'Ya comÃ­.', audio: true, difficulty: 2 },
      { id: '16-3', hanzi: 'å’Œ', pinyin: 'hÃ©', translation: 'Y / Con', type: 'conjunciÃ³n', example: 'ä½ å’Œæˆ‘ã€‚', exampleTr: 'TÃº y yo.', audio: true, difficulty: 1 },
      { id: '16-4', hanzi: 'ä¸', pinyin: 'bÃ¹', translation: 'No (negaciÃ³n)', type: 'adverbio', example: 'æˆ‘ä¸åŽ»ã€‚', exampleTr: 'No voy.', audio: true, difficulty: 1 },
      { id: '16-5', hanzi: 'æ²¡', pinyin: 'mÃ©i', translation: 'No (negaciÃ³n de æœ‰)', type: 'adverbio', example: 'æˆ‘æ²¡æœ‰é’±ã€‚', exampleTr: 'No tengo dinero.', audio: true, difficulty: 1 },
      { id: '16-6', hanzi: 'å¾ˆ', pinyin: 'hÄ›n', translation: 'Muy', type: 'adverbio', example: 'ä»–å¾ˆé«˜ã€‚', exampleTr: 'Ã‰l es muy alto.', audio: true, difficulty: 1 },
      { id: '16-7', hanzi: 'å¤ª', pinyin: 'tÃ i', translation: 'Demasiado', type: 'adverbio', example: 'å¤ªè´µäº†ï¼', exampleTr: 'Â¡Demasiado caro!', audio: true, difficulty: 2 },
      { id: '16-8', hanzi: 'éƒ½', pinyin: 'dÅu', translation: 'Todo/Todos', type: 'adverbio', example: 'æˆ‘ä»¬éƒ½åŽ»ã€‚', exampleTr: 'Todos vamos.', audio: true, difficulty: 2 },
      { id: '16-9', hanzi: 'ä¹Ÿ', pinyin: 'yÄ›', translation: 'TambiÃ©n', type: 'adverbio', example: 'æˆ‘ä¹ŸåŽ»ã€‚', exampleTr: 'Yo tambiÃ©n voy.', audio: true, difficulty: 1 },
    ]
  }
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ACHIEVEMENTS SYSTEM
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const achievementsList = [
  { id: 'first_lesson', title: 'Primer Paso', desc: 'Completa tu primera lecciÃ³n', icon: 'ðŸŽ¯', xp: 50, condition: (stats) => stats.lessonsCompleted >= 1 },
  { id: 'streak_3', title: 'En Racha', desc: '3 dÃ­as consecutivos', icon: 'ðŸ”¥', xp: 100, condition: (stats) => stats.streak >= 3 },
  { id: 'streak_7', title: 'Semana Perfecta', desc: '7 dÃ­as consecutivos', icon: 'ðŸ’ª', xp: 250, condition: (stats) => stats.streak >= 7 },
  { id: 'streak_30', title: 'Maestro Disciplinado', desc: '30 dÃ­as consecutivos', icon: 'ðŸ‘‘', xp: 1000, condition: (stats) => stats.streak >= 30 },
  { id: 'perfect_quiz', title: 'Perfeccionista', desc: '100% en un quiz', icon: 'ðŸ’¯', xp: 150, condition: (stats) => stats.perfectQuizzes >= 1 },
  { id: 'five_perfect', title: 'Imparable', desc: '5 quizzes perfectos', icon: 'â­', xp: 500, condition: (stats) => stats.perfectQuizzes >= 5 },
  { id: 'half_course', title: 'Mitad del Camino', desc: 'Completa el 50% del curso', icon: 'ðŸ”ï¸', xp: 300, condition: (stats) => stats.lessonsCompleted >= 8 },
  { id: 'course_complete', title: 'HSK1 Dominado', desc: 'Completa todo el curso', icon: 'ðŸ†', xp: 1000, condition: (stats) => stats.lessonsCompleted >= 16 },
  { id: 'words_50', title: 'Vocabulario BÃ¡sico', desc: 'Aprende 50 palabras', icon: 'ðŸ“–', xp: 200, condition: (stats) => stats.wordsLearned >= 50 },
  { id: 'words_100', title: 'Vocabulario Intermedio', desc: 'Aprende 100 palabras', icon: 'ðŸ“š', xp: 400, condition: (stats) => stats.wordsLearned >= 100 },
  { id: 'words_150', title: 'Vocabulario Completo', desc: 'Aprende todas las palabras HSK1', icon: 'ðŸŽ“', xp: 750, condition: (stats) => stats.wordsLearned >= 150 },
  { id: 'night_owl', title: 'BÃºho Nocturno', desc: 'Estudia despuÃ©s de las 11pm', icon: 'ðŸ¦‰', xp: 75, condition: (stats) => stats.nightStudy },
  { id: 'early_bird', title: 'Madrugador', desc: 'Estudia antes de las 7am', icon: 'ðŸ¦', xp: 75, condition: (stats) => stats.earlyStudy },
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SPACED REPETITION SYSTEM (SRS)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const calculateNextReview = (item, quality) => {
  // Quality: 0-2 = fail, 3 = hard, 4 = good, 5 = easy
  const now = Date.now();
  let { interval = 1, easeFactor = 2.5, repetitions = 0 } = item.srs || {};
  
  if (quality < 3) {
    repetitions = 0;
    interval = 1;
  } else {
    if (repetitions === 0) interval = 1;
    else if (repetitions === 1) interval = 6;
    else interval = Math.round(interval * easeFactor);
    
    easeFactor = Math.max(1.3, easeFactor + (0.1 - (5 - quality) * (0.08 + (5 - quality) * 0.02)));
    repetitions += 1;
  }
  
  return {
    interval,
    easeFactor,
    repetitions,
    nextReview: now + interval * 24 * 60 * 60 * 1000,
    lastReview: now
  };
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// UTILITY FUNCTIONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const speak = (text, rate = 0.8) => {
  if ('speechSynthesis' in window) {
    window.speechSynthesis.cancel();
    const utterance = new SpeechSynthesisUtterance(text);
    utterance.lang = 'zh-CN';
    utterance.rate = rate;
    window.speechSynthesis.speak(utterance);
  }
};

const getToneColor = (pinyin) => {
  if (pinyin.match(/[ÄÄ“Ä«ÅÅ«Ç–]/)) return 'text-red-500';
  if (pinyin.match(/[Ã¡Ã©Ã­Ã³ÃºÇ˜]/)) return 'text-orange-500';
  if (pinyin.match(/[ÇŽÄ›ÇÇ’Ç”Çš]/)) return 'text-green-500';
  if (pinyin.match(/[Ã Ã¨Ã¬Ã²Ã¹Çœ]/)) return 'text-blue-500';
  return 'text-slate-500';
};

const shuffleArray = (array) => {
  const shuffled = [...array];
  for (let i = shuffled.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
  }
  return shuffled;
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MAIN APP COMPONENT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const App = () => {
  // Core State
  const [activeView, setActiveView] = useState('dashboard');
  const [currentUnitId, setCurrentUnitId] = useState(null);
  const [darkMode, setDarkMode] = useState(false);
  
  // User Progress State
  const [userProgress, setUserProgress] = useState({
    completedUnits: [],
    unitScores: {},
    xp: 0,
    streak: 1,
    lastStudyDate: null,
    hearts: 5,
    level: 1,
    wordsLearned: [],
    srsData: {},
    achievements: [],
    stats: {
      lessonsCompleted: 0,
      perfectQuizzes: 0,
      totalQuizzes: 0,
      nightStudy: false,
      earlyStudy: false,
      wordsLearned: 0
    }
  });

  // UI State
  const [showAchievement, setShowAchievement] = useState(null);
  const [showSettings, setShowSettings] = useState(false);

  // Load Progress
  useEffect(() => {
    const saved = localStorage.getItem('hsk1_pro_progress_v2');
    if (saved) {
      const data = JSON.parse(saved);
      setUserProgress(data);
    }
    
    // Check time of day for achievements
    const hour = new Date().getHours();
    if (hour >= 23 || hour < 4) {
      updateStats('nightStudy', true);
    }
    if (hour >= 5 && hour < 7) {
      updateStats('earlyStudy', true);
    }
  }, []);

  // Save Progress
  const saveProgress = useCallback((newProgress) => {
    localStorage.setItem('hsk1_pro_progress_v2', JSON.stringify(newProgress));
  }, []);

  // Update Stats Helper
  const updateStats = useCallback((key, value) => {
    setUserProgress(prev => {
      const updated = {
        ...prev,
        stats: { ...prev.stats, [key]: value }
      };
      saveProgress(updated);
      return updated;
    });
  }, [saveProgress]);

  // Check Achievements
  const checkAchievements = useCallback((progress) => {
    const newAchievements = [];
    achievementsList.forEach(achievement => {
      if (!progress.achievements.includes(achievement.id) && achievement.condition(progress.stats)) {
        newAchievements.push(achievement);
      }
    });
    
    if (newAchievements.length > 0) {
      const achievement = newAchievements[0];
      setShowAchievement(achievement);
      
      setUserProgress(prev => {
        const updated = {
          ...prev,
          achievements: [...prev.achievements, achievement.id],
          xp: prev.xp + achievement.xp
        };
        saveProgress(updated);
        return updated;
      });
      
      setTimeout(() => setShowAchievement(null), 4000);
    }
  }, [saveProgress]);

  // Handle Unit Completion
  const handleUnitComplete = useCallback((unitId, score, perfectScore) => {
    setUserProgress(prev => {
      const isNewCompletion = !prev.completedUnits.includes(unitId);
      const unit = courseData.find(u => u.id === unitId);
      const wordsInUnit = unit?.content.map(c => c.id) || [];
      
      const updated = {
        ...prev,
        completedUnits: isNewCompletion ? [...prev.completedUnits, unitId] : prev.completedUnits,
        unitScores: { ...prev.unitScores, [unitId]: Math.max(prev.unitScores[unitId] || 0, score) },
        xp: prev.xp + (isNewCompletion ? 100 : 10) + score,
        wordsLearned: [...new Set([...prev.wordsLearned, ...wordsInUnit])],
        level: Math.floor((prev.xp + 100 + score) / 500) + 1,
        stats: {
          ...prev.stats,
          lessonsCompleted: isNewCompletion ? prev.stats.lessonsCompleted + 1 : prev.stats.lessonsCompleted,
          perfectQuizzes: perfectScore ? prev.stats.perfectQuizzes + 1 : prev.stats.perfectQuizzes,
          totalQuizzes: prev.stats.totalQuizzes + 1,
          wordsLearned: [...new Set([...prev.wordsLearned, ...wordsInUnit])].length
        }
      };
      
      saveProgress(updated);
      checkAchievements(updated);
      return updated;
    });
    
    setActiveView('results');
  }, [saveProgress, checkAchievements]);

  // Calculate Level Progress
  const levelProgress = useMemo(() => {
    const currentLevelXP = (userProgress.level - 1) * 500;
    const nextLevelXP = userProgress.level * 500;
    return ((userProgress.xp - currentLevelXP) / (nextLevelXP - currentLevelXP)) * 100;
  }, [userProgress.xp, userProgress.level]);

  // Get words due for review
  const wordsDueForReview = useMemo(() => {
    const now = Date.now();
    return userProgress.wordsLearned.filter(wordId => {
      const srs = userProgress.srsData[wordId];
      return !srs || srs.nextReview <= now;
    });
  }, [userProgress.wordsLearned, userProgress.srsData]);

  // Theme Classes
  const theme = {
    bg: darkMode ? 'bg-slate-900' : 'bg-slate-50',
    card: darkMode ? 'bg-slate-800 border-slate-700' : 'bg-white border-slate-200',
    text: darkMode ? 'text-white' : 'text-slate-800',
    textMuted: darkMode ? 'text-slate-400' : 'text-slate-500',
    border: darkMode ? 'border-slate-700' : 'border-slate-200'
  };

  return (
    <div className={`min-h-screen ${theme.bg} ${theme.text} font-sans transition-colors duration-300`}>
      {/* Achievement Popup */}
      {showAchievement && (
        <div className="fixed top-20 left-1/2 -translate-x-1/2 z-50 animate-bounce">
          <div className="bg-gradient-to-r from-amber-500 to-orange-500 text-white px-6 py-4 rounded-2xl shadow-2xl flex items-center gap-4">
            <span className="text-4xl">{showAchievement.icon}</span>
            <div>
              <p className="text-sm font-medium opacity-90">Â¡Logro Desbloqueado!</p>
              <p className="font-bold text-lg">{showAchievement.title}</p>
              <p className="text-sm opacity-90">+{showAchievement.xp} XP</p>
            </div>
          </div>
        </div>
      )}

      {/* Header */}
      <header className={`${theme.card} border-b sticky top-0 z-40 px-4 py-3 shadow-sm`}>
        <div className="max-w-4xl mx-auto flex justify-between items-center">
          <div 
            className="flex items-center gap-3 cursor-pointer" 
            onClick={() => { setActiveView('dashboard'); setCurrentUnitId(null); }}
          >
            <div className="relative">
              <div className="bg-gradient-to-br from-red-500 to-red-600 text-white font-bold px-2.5 py-1.5 rounded-lg text-sm shadow-lg">
                HSK1
              </div>
              <div className="absolute -top-1 -right-1 w-3 h-3 bg-emerald-400 rounded-full border-2 border-white"></div>
            </div>
            <div>
              <h1 className="font-bold text-lg tracking-tight">
                MandarÃ­n<span className="text-indigo-500">Pro</span>
              </h1>
              <p className={`text-xs ${theme.textMuted}`}>150 palabras oficiales</p>
            </div>
          </div>
          
          <div className="flex items-center gap-4">
            {/* Streak */}
            <div className="flex items-center gap-1.5 text-orange-500">
              <Flame size={18} fill="currentColor" />
              <span className="font-bold text-sm">{userProgress.streak}</span>
            </div>
            
            {/* Hearts */}
            <div className="flex items-center gap-1.5 text-red-500">
              <Heart size={18} fill="currentColor" />
              <span className="font-bold text-sm">{userProgress.hearts}</span>
            </div>
            
            {/* XP / Level */}
            <div className="hidden sm:flex items-center gap-2">
              <div className="relative">
                <div className={`w-10 h-10 rounded-full ${darkMode ? 'bg-slate-700' : 'bg-slate-100'} flex items-center justify-center`}>
                  <span className="font-bold text-indigo-500">{userProgress.level}</span>
                </div>
                <svg className="absolute inset-0 w-10 h-10 -rotate-90">
                  <circle
                    cx="20" cy="20" r="18"
                    fill="none"
                    stroke={darkMode ? '#334155' : '#e2e8f0'}
                    strokeWidth="3"
                  />
                  <circle
                    cx="20" cy="20" r="18"
                    fill="none"
                    stroke="#6366f1"
                    strokeWidth="3"
                    strokeDasharray={`${levelProgress * 1.13} 113`}
                    strokeLinecap="round"
                  />
                </svg>
              </div>
              <div className="text-xs">
                <p className="font-bold">{userProgress.xp} XP</p>
                <p className={theme.textMuted}>Nivel {userProgress.level}</p>
              </div>
            </div>
            
            {/* Settings */}
            <button 
              onClick={() => setShowSettings(!showSettings)}
              className={`p-2 rounded-lg ${darkMode ? 'hover:bg-slate-700' : 'hover:bg-slate-100'} transition-colors`}
            >
              <Settings size={20} className={theme.textMuted} />
            </button>
          </div>
        </div>
        
        {/* Settings Panel */}
        {showSettings && (
          <div className={`absolute right-4 top-16 ${theme.card} border rounded-xl shadow-xl p-4 min-w-[200px]`}>
            <div className="flex items-center justify-between mb-4">
              <span className="font-medium">Modo Oscuro</span>
              <button 
                onClick={() => setDarkMode(!darkMode)}
                className={`p-2 rounded-lg ${darkMode ? 'bg-slate-700' : 'bg-slate-100'}`}
              >
                {darkMode ? <Sun size={18} /> : <Moon size={18} />}
              </button>
            </div>
            <div className={`border-t ${theme.border} pt-4`}>
              <p className={`text-xs ${theme.textMuted} mb-2`}>Progreso Total</p>
              <div className="flex items-center gap-2">
                <div className={`flex-1 h-2 ${darkMode ? 'bg-slate-700' : 'bg-slate-200'} rounded-full overflow-hidden`}>
                  <div 
                    className="h-full bg-gradient-to-r from-emerald-500 to-teal-500 transition-all"
                    style={{ width: `${(userProgress.completedUnits.length / courseData.length) * 100}%` }}
                  />
                </div>
                <span className="text-xs font-bold">
                  {Math.round((userProgress.completedUnits.length / courseData.length) * 100)}%
                </span>
              </div>
            </div>
          </div>
        )}
      </header>

      {/* Main Content */}
      <main className="max-w-4xl mx-auto p-4 md:p-6 pb-24">
        {activeView === 'dashboard' && (
          <Dashboard 
            units={courseData}
            progress={userProgress}
            theme={theme}
            darkMode={darkMode}
            onSelectUnit={(id) => { setCurrentUnitId(id); setActiveView('learning'); }}
            wordsDueForReview={wordsDueForReview}
            onStartReview={() => setActiveView('review')}
          />
        )}
        
        {activeView === 'learning' && currentUnitId && (
          <LearningMode
            unit={courseData.find(u => u.id === currentUnitId)}
            theme={theme}
            darkMode={darkMode}
            onFinish={() => setActiveView('quiz')}
            onBack={() => { setActiveView('dashboard'); setCurrentUnitId(null); }}
          />
        )}
        
        {activeView === 'quiz' && currentUnitId && (
          <QuizMode
            unit={courseData.find(u => u.id === currentUnitId)}
            theme={theme}
            darkMode={darkMode}
            hearts={userProgress.hearts}
            onComplete={(score, perfect) => handleUnitComplete(currentUnitId, score, perfect)}
            onHeartLost={() => setUserProgress(prev => ({ ...prev, hearts: Math.max(0, prev.hearts - 1) }))}
          />
        )}

        {activeView === 'results' && (
          <ResultsScreen
            unit={courseData.find(u => u.id === currentUnitId)}
            score={userProgress.unitScores[currentUnitId] || 0}
            theme={theme}
            darkMode={darkMode}
            onContinue={() => { setActiveView('dashboard'); setCurrentUnitId(null); }}
            onRetry={() => setActiveView('learning')}
          />
        )}

        {activeView === 'stats' && (
          <StatsView
            progress={userProgress}
            achievements={achievementsList}
            theme={theme}
            darkMode={darkMode}
          />
        )}

        {activeView === 'review' && (
          <ReviewMode
            wordsToReview={wordsDueForReview}
            allWords={courseData.flatMap(u => u.content)}
            theme={theme}
            darkMode={darkMode}
            srsData={userProgress.srsData}
            onUpdateSRS={(wordId, quality) => {
              setUserProgress(prev => {
                const currentSRS = prev.srsData[wordId] || {};
                const newSRS = calculateNextReview({ srs: currentSRS }, quality);
                const updated = {
                  ...prev,
                  srsData: { ...prev.srsData, [wordId]: newSRS }
                };
                saveProgress(updated);
                return updated;
              });
            }}
            onFinish={() => setActiveView('dashboard')}
          />
        )}
      </main>

      {/* Bottom Navigation */}
      <nav className={`fixed bottom-0 left-0 w-full ${theme.card} border-t flex justify-around py-2 z-50`}>
        {[
          { id: 'dashboard', icon: Home, label: 'Inicio' },
          { id: 'review', icon: Brain, label: 'Repasar', badge: wordsDueForReview.length },
          { id: 'stats', icon: BarChart, label: 'EstadÃ­sticas' },
        ].map(item => (
          <button
            key={item.id}
            onClick={() => setActiveView(item.id)}
            className={`flex flex-col items-center gap-1 px-4 py-2 rounded-xl transition-all relative
              ${activeView === item.id 
                ? 'text-indigo-500' 
                : theme.textMuted + ' hover:text-indigo-400'
              }`}
          >
            <item.icon size={22} strokeWidth={activeView === item.id ? 2.5 : 2} />
            <span className="text-xs font-medium">{item.label}</span>
            {item.badge > 0 && (
              <span className="absolute -top-1 -right-1 bg-red-500 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center font-bold">
                {item.badge > 9 ? '9+' : item.badge}
              </span>
            )}
          </button>
        ))}
      </nav>
    </div>
  );
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DASHBOARD COMPONENT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const Dashboard = ({ units, progress, theme, darkMode, onSelectUnit, wordsDueForReview, onStartReview }) => {
  const totalWords = units.reduce((acc, u) => acc + u.content.length, 0);
  const learnedWords = progress.wordsLearned.length;
  const progressPercent = Math.round((progress.completedUnits.length / units.length) * 100);

  return (
    <div className="space-y-6 animate-in fade-in duration-500">
      {/* Hero Card */}
      <div className="relative bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-500 rounded-3xl p-6 text-white shadow-2xl overflow-hidden">
        <div className="absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -mr-32 -mt-32" />
        <div className="absolute bottom-0 left-0 w-48 h-48 bg-black/10 rounded-full blur-2xl -ml-24 -mb-24" />
        
        <div className="relative z-10">
          <div className="flex items-start justify-between mb-6">
            <div>
              <p className="text-white/80 text-sm font-medium mb-1">Tu Progreso</p>
              <h2 className="text-3xl font-bold mb-1">Â¡Hola, Emiliano!</h2>
              <p className="text-white/70 text-sm">ContinÃºa tu camino al HSK1</p>
            </div>
            <div className="text-right">
              <div className="text-4xl font-bold">{progressPercent}%</div>
              <p className="text-white/70 text-xs">completado</p>
            </div>
          </div>
          
          <div className="grid grid-cols-3 gap-3">
            <div className="bg-white/15 backdrop-blur-sm rounded-xl p-3 text-center">
              <p className="text-2xl font-bold">{learnedWords}</p>
              <p className="text-xs text-white/70">Palabras</p>
            </div>
            <div className="bg-white/15 backdrop-blur-sm rounded-xl p-3 text-center">
              <p className="text-2xl font-bold">{progress.streak}</p>
              <p className="text-xs text-white/70">Racha ðŸ”¥</p>
            </div>
            <div className="bg-white/15 backdrop-blur-sm rounded-xl p-3 text-center">
              <p className="text-2xl font-bold">{progress.xp}</p>
              <p className="text-xs text-white/70">XP Total</p>
            </div>
          </div>
        </div>
      </div>

      {/* Review Reminder */}
      {wordsDueForReview.length > 0 && (
        <button
          onClick={onStartReview}
          className={`w-full ${theme.card} border rounded-2xl p-4 flex items-center gap-4 hover:border-indigo-300 transition-all group`}
        >
          <div className="w-14 h-14 bg-gradient-to-br from-amber-400 to-orange-500 rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform">
            <Brain size={28} className="text-white" />
          </div>
          <div className="flex-1 text-left">
            <h3 className="font-bold text-lg">Repaso Pendiente</h3>
            <p className={theme.textMuted}>{wordsDueForReview.length} palabras listas para repasar</p>
          </div>
          <ChevronRight size={24} className={`${theme.textMuted} group-hover:translate-x-1 transition-transform`} />
        </button>
      )}

      {/* Units Grid */}
      <div>
        <h3 className="text-xl font-bold mb-4 flex items-center gap-2">
          <GraduationCap className="text-indigo-500" size={24} />
          Ruta de Aprendizaje
        </h3>
        
        <div className="space-y-3">
          {units.map((unit, index) => {
            const isCompleted = progress.completedUnits.includes(unit.id);
            const isLocked = index > 0 && !progress.completedUnits.includes(units[index - 1].id) && !isCompleted;
            const score = progress.unitScores[unit.id];
            const stars = score ? Math.ceil((score / (unit.content.length * 10)) * 3) : 0;
            
            return (
              <div
                key={unit.id}
                onClick={() => !isLocked && onSelectUnit(unit.id)}
                className={`
                  ${theme.card} border rounded-2xl p-4 transition-all duration-300 group
                  ${isLocked 
                    ? 'opacity-50 cursor-not-allowed' 
                    : 'cursor-pointer hover:shadow-lg hover:border-indigo-300 hover:-translate-y-0.5'
                  }
                  ${isCompleted ? 'border-emerald-300' : ''}
                `}
              >
                <div className="flex items-center gap-4">
                  <div className={`
                    w-14 h-14 rounded-2xl flex items-center justify-center text-2xl shadow-lg
                    ${isLocked 
                      ? (darkMode ? 'bg-slate-700' : 'bg-slate-200')
                      : `bg-gradient-to-br ${unit.color}`
                    }
                  `}>
                    {isLocked ? <Lock size={24} className={theme.textMuted} /> : unit.icon}
                  </div>
                  
                  <div className="flex-1 min-w-0">
                    <div className="flex items-center gap-2 mb-1">
                      <h4 className={`font-bold truncate ${isLocked ? theme.textMuted : ''}`}>
                        {unit.title}
                      </h4>
                      {isCompleted && (
                        <CheckCircle size={18} className="text-emerald-500 shrink-0" />
                      )}
                    </div>
                    <p className={`text-sm ${theme.textMuted} truncate`}>{unit.description}</p>
                    <div className="flex items-center gap-3 mt-2">
                      <span className={`text-xs ${darkMode ? 'bg-slate-700' : 'bg-slate-100'} px-2 py-0.5 rounded-full`}>
                        {unit.content.length} palabras
                      </span>
                      {isCompleted && (
                        <div className="flex items-center gap-0.5">
                          {[1, 2, 3].map(i => (
                            <Star 
                              key={i} 
                              size={14} 
                              className={i <= stars ? 'text-amber-400 fill-amber-400' : theme.textMuted}
                            />
                          ))}
                        </div>
                      )}
                    </div>
                  </div>
                  
                  {!isLocked && (
                    <ChevronRight 
                      size={24} 
                      className={`${theme.textMuted} group-hover:translate-x-1 transition-transform shrink-0`} 
                    />
                  )}
                </div>
              </div>
            );
          })}
        </div>
      </div>
    </div>
  );
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// LEARNING MODE COMPONENT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const LearningMode = ({ unit, theme, darkMode, onFinish, onBack }) => {
  const [currentIndex, setCurrentIndex] = useState(0);
  const [isFlipped, setIsFlipped] = useState(false);
  const [showGrammar, setShowGrammar] = useState(false);
  const [autoPlay, setAutoPlay] = useState(false);
  
  const item = unit.content[currentIndex];
  const progress = ((currentIndex + 1) / unit.content.length) * 100;

  useEffect(() => {
    setIsFlipped(false);
  }, [currentIndex]);

  useEffect(() => {
    if (autoPlay && isFlipped) {
      const timer = setTimeout(() => {
        if (currentIndex < unit.content.length - 1) {
          setCurrentIndex(prev => prev + 1);
        }
      }, 3000);
      return () => clearTimeout(timer);
    }
  }, [autoPlay, isFlipped, currentIndex, unit.content.length]);

  const nextCard = () => {
    if (currentIndex < unit.content.length - 1) {
      setCurrentIndex(prev => prev + 1);
    } else {
      onFinish();
    }
  };

  const prevCard = () => {
    if (currentIndex > 0) {
      setCurrentIndex(prev => prev - 1);
    }
  };

  return (
    <div className="min-h-[85vh] flex flex-col">
      {/* Top Bar */}
      <div className="flex items-center gap-4 mb-6">
        <button 
          onClick={onBack} 
          className={`p-2 rounded-xl ${darkMode ? 'hover:bg-slate-800' : 'hover:bg-slate-100'} transition-colors`}
        >
          <ChevronLeft size={24} />
        </button>
        
        <div className="flex-1">
          <div className={`h-3 ${darkMode ? 'bg-slate-800' : 'bg-slate-200'} rounded-full overflow-hidden`}>
            <div 
              className="h-full bg-gradient-to-r from-indigo-500 to-purple-500 transition-all duration-500"
              style={{ width: `${progress}%` }}
            />
          </div>
        </div>
        
        <span className={`text-sm font-medium ${theme.textMuted}`}>
          {currentIndex + 1}/{unit.content.length}
        </span>
        
        <button
          onClick={() => setAutoPlay(!autoPlay)}
          className={`p-2 rounded-xl transition-colors ${autoPlay ? 'bg-indigo-500 text-white' : (darkMode ? 'bg-slate-800' : 'bg-slate-100')}`}
        >
          {autoPlay ? <Pause size={20} /> : <Play size={20} />}
        </button>
      </div>

      {/* Grammar Section */}
      {unit.grammar && unit.grammar.length > 0 && (
        <button
          onClick={() => setShowGrammar(!showGrammar)}
          className={`${theme.card} border rounded-xl p-3 mb-4 w-full text-left flex items-center justify-between`}
        >
          <div className="flex items-center gap-2">
            <Info size={18} className="text-indigo-500" />
            <span className="font-medium">Tips de GramÃ¡tica</span>
          </div>
          {showGrammar ? <ChevronUp size={20} /> : <ChevronDown size={20} />}
        </button>
      )}
      
      {showGrammar && (
        <div className={`${theme.card} border rounded-xl p-4 mb-4 space-y-3`}>
          {unit.grammar.map((g, i) => (
            <div key={i}>
              <h4 className="font-bold text-sm text-indigo-500">{g.title}</h4>
              <p className={`text-sm ${theme.textMuted}`}>{g.content}</p>
            </div>
          ))}
        </div>
      )}

      {/* Main Card */}
      <div className="flex-1 flex flex-col items-center justify-center">
        <div 
          onClick={() => setIsFlipped(!isFlipped)}
          className={`
            relative w-full max-w-sm aspect-[3/4] cursor-pointer
            transition-all duration-700
            [transform-style:preserve-3d]
            ${isFlipped ? '[transform:rotateY(180deg)]' : ''}
          `}
        >
          {/* Front */}
          <div className={`
            absolute inset-0 ${theme.card} border rounded-3xl shadow-2xl p-6
            flex flex-col items-center justify-center text-center
            [backface-visibility:hidden]
          `}>
            <span className={`text-xs uppercase tracking-widest ${theme.textMuted} mb-4 font-semibold px-3 py-1 ${darkMode ? 'bg-slate-700' : 'bg-slate-100'} rounded-full`}>
              {item.type}
            </span>
            
            <h2 className="text-7xl font-bold mb-4 font-serif">{item.hanzi}</h2>
            
            <button 
              onClick={(e) => { e.stopPropagation(); speak(item.hanzi); }}
              className="p-4 bg-gradient-to-br from-indigo-500 to-purple-500 text-white rounded-full shadow-lg hover:shadow-xl hover:scale-110 transition-all mb-6"
            >
              <Volume2 size={28} />
            </button>
            
            <p className={`${theme.textMuted} text-sm mt-auto flex items-center gap-2`}>
              <Eye size={16} />
              Toca para revelar
            </p>
          </div>

          {/* Back */}
          <div className={`
            absolute inset-0 rounded-3xl shadow-2xl p-6
            flex flex-col items-center justify-center text-center
            [backface-visibility:hidden] [transform:rotateY(180deg)]
            bg-gradient-to-br ${unit.color} text-white
          `}>
            <h3 className={`text-3xl font-bold mb-2 ${getToneColor(item.pinyin).replace('text-', 'text-white/')}`}>
              {item.pinyin}
            </h3>
            <h4 className="text-xl font-medium mb-6 text-white/90">{item.translation}</h4>
            
            <div className="w-full bg-white/20 backdrop-blur-sm p-4 rounded-2xl text-left">
              <div className="flex justify-between items-center mb-2">
                <span className="text-xs font-bold uppercase opacity-80">Ejemplo</span>
                <button 
                  onClick={(e) => { e.stopPropagation(); speak(item.example); }} 
                  className="text-white/80 hover:text-white p-1"
                >
                  <Volume2 size={18} />
                </button>
              </div>
              <p className="text-lg mb-1 font-serif">{item.example}</p>
              <p className="text-sm opacity-80">{item.exampleTr}</p>
            </div>
          </div>
        </div>
      </div>

      {/* Controls */}
      <div className="mt-6 flex justify-between items-center max-w-sm mx-auto w-full px-4">
        <button 
          onClick={prevCard}
          disabled={currentIndex === 0}
          className={`p-4 rounded-2xl transition-all ${darkMode ? 'hover:bg-slate-800' : 'hover:bg-slate-100'} disabled:opacity-30`}
        >
          <ChevronLeft size={28} />
        </button>
        
        {currentIndex === unit.content.length - 1 ? (
          <button 
            onClick={onFinish}
            className="px-8 py-4 bg-gradient-to-r from-emerald-500 to-teal-500 text-white rounded-2xl font-bold shadow-xl hover:shadow-2xl hover:scale-105 transition-all"
          >
            Hacer Quiz ðŸŽ¯
          </button>
        ) : (
          <button 
            onClick={nextCard}
            className="px-8 py-4 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-2xl font-bold shadow-xl hover:shadow-2xl hover:scale-105 transition-all"
          >
            Siguiente â†’
          </button>
        )}
      </div>
    </div>
  );
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// QUIZ MODE COMPONENT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const QuizMode = ({ unit, theme, darkMode, hearts, onComplete, onHeartLost }) => {
  const [qIndex, setQIndex] = useState(0);
  const [score, setScore] = useState(0);
  const [selectedOption, setSelectedOption] = useState(null);
  const [isCorrect, setIsCorrect] = useState(null);
  const [currentHearts, setCurrentHearts] = useState(hearts);
  const [showFeedback, setShowFeedback] = useState(false);
  
  const questions = useMemo(() => {
    return shuffleArray(unit.content).map(item => {
      const otherItems = unit.content.filter(i => i.id !== item.id);
      const wrong = shuffleArray(otherItems).slice(0, 3);
      const options = shuffleArray([...wrong, item]);
      
      // Different question types
      const types = ['hanzi_to_trans', 'trans_to_hanzi', 'pinyin_to_hanzi', 'audio_to_trans'];
      const type = types[Math.floor(Math.random() * types.length)];
      
      return { target: item, options, type };
    });
  }, [unit.content]);

  const handleAnswer = (option) => {
    if (selectedOption) return;
    
    setSelectedOption(option);
    const correct = option.id === questions[qIndex].target.id;
    setIsCorrect(correct);
    setShowFeedback(true);
    
    if (correct) {
      setScore(s => s + 10);
      speak(questions[qIndex].target.hanzi);
    } else {
      setCurrentHearts(h => h - 1);
      onHeartLost();
    }

    setTimeout(() => {
      if (qIndex < questions.length - 1 && currentHearts > (correct ? 0 : 1)) {
        setQIndex(prev => prev + 1);
        setSelectedOption(null);
        setIsCorrect(null);
        setShowFeedback(false);
      } else {
        const perfectScore = score + (correct ? 10 : 0) === questions.length * 10;
        onComplete(score + (correct ? 10 : 0), perfectScore);
      }
    }, 1500);
  };

  const currentQ = questions[qIndex];

  // Auto-play audio for audio questions
  useEffect(() => {
    if (currentQ?.type === 'audio_to_trans') {
      setTimeout(() => speak(currentQ.target.hanzi), 500);
    }
  }, [qIndex, currentQ]);

  return (
    <div className="max-w-md mx-auto pt-4">
      {/* Header */}
      <div className="flex items-center justify-between mb-6">
        <div className="flex items-center gap-1">
          {Array(5).fill(0).map((_, i) => (
            <Heart 
              key={i} 
              size={24} 
              className={i < currentHearts ? 'text-red-500 fill-red-500' : theme.textMuted}
            />
          ))}
        </div>
        <div className={`flex-1 mx-4 h-3 ${darkMode ? 'bg-slate-800' : 'bg-slate-200'} rounded-full overflow-hidden`}>
          <div 
            className="h-full bg-gradient-to-r from-indigo-500 to-purple-500 transition-all duration-300"
            style={{ width: `${((qIndex) / questions.length) * 100}%` }}
          />
        </div>
        <span className={`font-bold ${theme.textMuted}`}>{qIndex + 1}/{questions.length}</span>
      </div>

      {/* Question Card */}
      <div className={`${theme.card} border rounded-3xl shadow-xl p-8 text-center mb-6`}>
        <span className={`text-xs font-bold ${theme.textMuted} uppercase tracking-wider mb-4 block`}>
          {currentQ.type === 'hanzi_to_trans' && 'Â¿QuÃ© significa este carÃ¡cter?'}
          {currentQ.type === 'trans_to_hanzi' && 'Selecciona el carÃ¡cter correcto'}
          {currentQ.type === 'pinyin_to_hanzi' && 'Â¿QuÃ© carÃ¡cter tiene este pinyin?'}
          {currentQ.type === 'audio_to_trans' && 'Â¿QuÃ© escuchaste?'}
        </span>
        
        {currentQ.type === 'audio_to_trans' ? (
          <button 
            onClick={() => speak(currentQ.target.hanzi)}
            className="w-24 h-24 mx-auto bg-gradient-to-br from-indigo-500 to-purple-500 rounded-full flex items-center justify-center text-white shadow-xl hover:scale-110 transition-transform"
          >
            <Headphones size={48} />
          </button>
        ) : (
          <h2 className="text-5xl font-bold mb-4 font-serif">
            {currentQ.type === 'hanzi_to_trans' && currentQ.target.hanzi}
            {currentQ.type === 'trans_to_hanzi' && currentQ.target.translation}
            {currentQ.type === 'pinyin_to_hanzi' && currentQ.target.pinyin}
          </h2>
        )}
        
        {(currentQ.type === 'hanzi_to_trans' || currentQ.type === 'pinyin_to_hanzi') && (
          <button 
            onClick={() => speak(currentQ.target.hanzi)} 
            className="mx-auto text-indigo-500 bg-indigo-50 p-3 rounded-full hover:bg-indigo-100 transition-colors"
          >
            <Volume2 size={24} />
          </button>
        )}
      </div>

      {/* Options */}
      <div className="grid grid-cols-1 gap-3">
        {currentQ.options.map((opt) => {
          let statusClass = `${theme.card} border-2 ${theme.border} hover:border-indigo-400`;
          
          if (selectedOption) {
            if (opt.id === currentQ.target.id) {
              statusClass = "bg-emerald-500 border-2 border-emerald-500 text-white";
            } else if (opt.id === selectedOption.id) {
              statusClass = "bg-red-500 border-2 border-red-500 text-white";
            } else {
              statusClass = `${darkMode ? 'bg-slate-800' : 'bg-slate-100'} border-2 ${theme.border} opacity-50`;
            }
          }

          return (
            <button
              key={opt.id}
              disabled={!!selectedOption}
              onClick={() => handleAnswer(opt)}
              className={`p-4 rounded-2xl font-medium text-lg transition-all duration-200 ${statusClass}`}
            >
              <div className="flex items-center justify-center gap-2">
                {currentQ.type === 'trans_to_hanzi' || currentQ.type === 'pinyin_to_hanzi' ? (
                  <>
                    <span className="text-2xl font-serif">{opt.hanzi}</span>
                    <span className={`text-sm ${selectedOption ? 'opacity-70' : theme.textMuted}`}>({opt.pinyin})</span>
                  </>
                ) : (
                  <span>{opt.translation}</span>
                )}
              </div>
            </button>
          );
        })}
      </div>

      {/* Feedback */}
      {showFeedback && (
        <div className={`mt-6 p-4 rounded-2xl ${isCorrect ? 'bg-emerald-100 text-emerald-800' : 'bg-red-100 text-red-800'}`}>
          <div className="flex items-center gap-3">
            {isCorrect ? <Check size={24} /> : <X size={24} />}
            <div>
              <p className="font-bold">{isCorrect ? 'Â¡Correcto!' : 'Incorrecto'}</p>
              {!isCorrect && (
                <p className="text-sm">
                  La respuesta era: {currentQ.target.hanzi} ({currentQ.target.translation})
                </p>
              )}
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// RESULTS SCREEN COMPONENT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const ResultsScreen = ({ unit, score, theme, darkMode, onContinue, onRetry }) => {
  const maxScore = unit.content.length * 10;
  const percentage = Math.round((score / maxScore) * 100);
  const stars = Math.ceil(percentage / 33.33);
  const passed = percentage >= 70;

  return (
    <div className="min-h-[80vh] flex flex-col items-center justify-center text-center animate-in zoom-in duration-300">
      {/* Stars Animation */}
      <div className="flex items-center gap-2 mb-6">
        {[1, 2, 3].map(i => (
          <Star 
            key={i}
            size={48}
            className={`transition-all duration-500 delay-${i * 200} ${
              i <= stars 
                ? 'text-amber-400 fill-amber-400 scale-100' 
                : `${theme.textMuted} scale-75`
            }`}
            style={{ animationDelay: `${i * 200}ms` }}
          />
        ))}
      </div>

      {/* Icon */}
      <div className={`w-24 h-24 rounded-full flex items-center justify-center mb-6 ${
        passed 
          ? 'bg-gradient-to-br from-emerald-400 to-teal-500' 
          : 'bg-gradient-to-br from-orange-400 to-amber-500'
      } shadow-xl`}>
        {passed ? <Trophy size={48} className="text-white" /> : <RefreshCcw size={48} className="text-white" />}
      </div>

      {/* Title */}
      <h2 className="text-3xl font-bold mb-2">
        {percentage === 100 ? 'Â¡Perfecto!' : passed ? 'Â¡Excelente!' : 'Â¡Buen intento!'}
      </h2>
      
      <p className={theme.textMuted + ' mb-2'}>
        {unit.title}
      </p>
      
      <p className="text-xl font-bold mb-8">
        {score} / {maxScore} puntos ({percentage}%)
      </p>

      {/* XP Earned */}
      <div className={`${theme.card} border rounded-2xl p-4 mb-8 flex items-center gap-4`}>
        <div className="w-12 h-12 bg-gradient-to-br from-amber-400 to-orange-500 rounded-xl flex items-center justify-center">
          <Zap size={24} className="text-white" />
        </div>
        <div className="text-left">
          <p className={theme.textMuted + ' text-sm'}>XP Ganado</p>
          <p className="text-2xl font-bold">+{100 + score}</p>
        </div>
      </div>

      {/* Actions */}
      <div className="flex gap-4">
        <button 
          onClick={onRetry}
          className={`px-6 py-3 ${theme.card} border rounded-2xl font-bold hover:shadow-lg transition-all`}
        >
          Practicar de Nuevo
        </button>
        <button 
          onClick={onContinue}
          className="px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-2xl font-bold shadow-xl hover:shadow-2xl hover:scale-105 transition-all"
        >
          Continuar â†’
        </button>
      </div>
    </div>
  );
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// STATS VIEW COMPONENT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const StatsView = ({ progress, achievements, theme, darkMode }) => {
  const totalWords = courseData.reduce((acc, u) => acc + u.content.length, 0);
  
  return (
    <div className="space-y-6 animate-in fade-in duration-500">
      <h2 className="text-2xl font-bold flex items-center gap-2">
        <BarChart className="text-indigo-500" />
        EstadÃ­sticas
      </h2>

      {/* Stats Grid */}
      <div className="grid grid-cols-2 gap-4">
        {[
          { label: 'Palabras Aprendidas', value: `${progress.wordsLearned.length}/${totalWords}`, icon: BookOpen, color: 'from-blue-500 to-indigo-500' },
          { label: 'Lecciones Completadas', value: `${progress.completedUnits.length}/${courseData.length}`, icon: CheckCircle, color: 'from-emerald-500 to-teal-500' },
          { label: 'Racha Actual', value: `${progress.streak} dÃ­as`, icon: Flame, color: 'from-orange-500 to-red-500' },
          { label: 'XP Total', value: progress.xp, icon: Zap, color: 'from-amber-500 to-orange-500' },
          { label: 'Nivel Actual', value: progress.level, icon: Award, color: 'from-purple-500 to-pink-500' },
          { label: 'Quizzes Perfectos', value: progress.stats.perfectQuizzes, icon: Star, color: 'from-yellow-500 to-amber-500' },
        ].map((stat, i) => (
          <div key={i} className={`${theme.card} border rounded-2xl p-4`}>
            <div className={`w-10 h-10 rounded-xl bg-gradient-to-br ${stat.color} flex items-center justify-center mb-3`}>
              <stat.icon size={20} className="text-white" />
            </div>
            <p className={theme.textMuted + ' text-sm'}>{stat.label}</p>
            <p className="text-2xl font-bold">{stat.value}</p>
          </div>
        ))}
      </div>

      {/* Achievements */}
      <div>
        <h3 className="text-xl font-bold mb-4 flex items-center gap-2">
          <Trophy className="text-amber-500" />
          Logros
        </h3>
        
        <div className="grid grid-cols-1 gap-3">
          {achievements.map(achievement => {
            const unlocked = progress.achievements.includes(achievement.id);
            
            return (
              <div 
                key={achievement.id}
                className={`${theme.card} border rounded-2xl p-4 flex items-center gap-4 ${!unlocked && 'opacity-50'}`}
              >
                <div className={`w-14 h-14 rounded-2xl flex items-center justify-center text-2xl ${
                  unlocked 
                    ? 'bg-gradient-to-br from-amber-400 to-orange-500' 
                    : (darkMode ? 'bg-slate-700' : 'bg-slate-200')
                }`}>
                  {unlocked ? achievement.icon : <Lock size={24} className={theme.textMuted} />}
                </div>
                <div className="flex-1">
                  <h4 className="font-bold">{achievement.title}</h4>
                  <p className={theme.textMuted + ' text-sm'}>{achievement.desc}</p>
                </div>
                <div className="text-right">
                  <p className={`text-sm font-bold ${unlocked ? 'text-amber-500' : theme.textMuted}`}>
                    +{achievement.xp} XP
                  </p>
                </div>
              </div>
            );
          })}
        </div>
      </div>
    </div>
  );
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// REVIEW MODE COMPONENT (SRS)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const ReviewMode = ({ wordsToReview, allWords, theme, darkMode, srsData, onUpdateSRS, onFinish }) => {
  const [currentIndex, setCurrentIndex] = useState(0);
  const [isFlipped, setIsFlipped] = useState(false);
  const [reviewed, setReviewed] = useState(0);

  const reviewWords = useMemo(() => {
    return wordsToReview.slice(0, 20).map(wordId => 
      allWords.find(w => w.id === wordId)
    ).filter(Boolean);
  }, [wordsToReview, allWords]);

  if (reviewWords.length === 0) {
    return (
      <div className="min-h-[80vh] flex flex-col items-center justify-center text-center">
        <div className="w-24 h-24 bg-gradient-to-br from-emerald-400 to-teal-500 rounded-full flex items-center justify-center mb-6">
          <CheckCircle size={48} className="text-white" />
        </div>
        <h2 className="text-2xl font-bold mb-2">Â¡Todo al dÃ­a!</h2>
        <p className={theme.textMuted + ' mb-6'}>No tienes palabras pendientes de repaso.</p>
        <button 
          onClick={onFinish}
          className="px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-2xl font-bold"
        >
          Volver al Inicio
        </button>
      </div>
    );
  }

  const item = reviewWords[currentIndex];

  const handleQuality = (quality) => {
    onUpdateSRS(item.id, quality);
    setReviewed(prev => prev + 1);
    setIsFlipped(false);
    
    if (currentIndex < reviewWords.length - 1) {
      setCurrentIndex(prev => prev + 1);
    } else {
      onFinish();
    }
  };

  if (!item) {
    onFinish();
    return null;
  }

  return (
    <div className="min-h-[85vh] flex flex-col">
      {/* Header */}
      <div className="flex items-center justify-between mb-6">
        <button onClick={onFinish} className={`p-2 rounded-xl ${darkMode ? 'hover:bg-slate-800' : 'hover:bg-slate-100'}`}>
          <X size={24} />
        </button>
        <div className="flex-1 mx-4">
          <div className={`h-3 ${darkMode ? 'bg-slate-800' : 'bg-slate-200'} rounded-full overflow-hidden`}>
            <div 
              className="h-full bg-gradient-to-r from-amber-500 to-orange-500 transition-all"
              style={{ width: `${(currentIndex / reviewWords.length) * 100}%` }}
            />
          </div>
        </div>
        <span className={theme.textMuted}>{currentIndex + 1}/{reviewWords.length}</span>
      </div>

      {/* Card */}
      <div className="flex-1 flex flex-col items-center justify-center">
        <div 
          onClick={() => setIsFlipped(!isFlipped)}
          className={`
            relative w-full max-w-sm aspect-[3/4] cursor-pointer
            transition-all duration-700 [transform-style:preserve-3d]
            ${isFlipped ? '[transform:rotateY(180deg)]' : ''}
          `}
        >
          {/* Front */}
          <div className={`
            absolute inset-0 ${theme.card} border rounded-3xl shadow-2xl p-6
            flex flex-col items-center justify-center text-center [backface-visibility:hidden]
          `}>
            <span className={`text-xs uppercase tracking-widest ${theme.textMuted} mb-4 px-3 py-1 ${darkMode ? 'bg-slate-700' : 'bg-slate-100'} rounded-full`}>
              Repaso SRS
            </span>
            <h2 className="text-7xl font-bold mb-4 font-serif">{item.hanzi}</h2>
            <button 
              onClick={(e) => { e.stopPropagation(); speak(item.hanzi); }}
              className="p-4 bg-gradient-to-br from-amber-500 to-orange-500 text-white rounded-full shadow-lg mb-6"
            >
              <Volume2 size={28} />
            </button>
            <p className={theme.textMuted + ' text-sm'}>Toca para ver respuesta</p>
          </div>

          {/* Back */}
          <div className={`
            absolute inset-0 bg-gradient-to-br from-amber-500 to-orange-600 rounded-3xl shadow-2xl p-6
            flex flex-col items-center justify-center text-center text-white
            [backface-visibility:hidden] [transform:rotateY(180deg)]
          `}>
            <h3 className="text-3xl font-bold mb-2">{item.pinyin}</h3>
            <h4 className="text-xl mb-4">{item.translation}</h4>
            <p className="text-sm opacity-80 mb-4">{item.example}</p>
            <p className="text-xs opacity-60">{item.exampleTr}</p>
          </div>
        </div>
      </div>

      {/* Rating Buttons */}
      {isFlipped && (
        <div className="mt-6 space-y-3 max-w-sm mx-auto w-full px-4 animate-in slide-in-from-bottom duration-300">
          <p className={`text-center ${theme.textMuted} text-sm mb-2`}>Â¿QuÃ© tan bien lo recordaste?</p>
          <div className="grid grid-cols-4 gap-2">
            {[
              { quality: 1, label: 'Olvidado', color: 'bg-red-500' },
              { quality: 3, label: 'DifÃ­cil', color: 'bg-orange-500' },
              { quality: 4, label: 'Bien', color: 'bg-emerald-500' },
              { quality: 5, label: 'FÃ¡cil', color: 'bg-indigo-500' },
            ].map(btn => (
              <button
                key={btn.quality}
                onClick={() => handleQuality(btn.quality)}
                className={`${btn.color} text-white py-3 rounded-xl font-medium text-sm hover:opacity-90 transition-opacity`}
              >
                {btn.label}
              </button>
            ))}
          </div>
        </div>
      )}
    </div>
  );
};

export default App;
